{"version":3,"sources":["graphql/queries.js","redux/reducers.js","redux/withRedux.js","components/BDAMobile/misc/Structures/StructureListItem.jsx","components/misc/Placeholder.jsx","components/BDAMobile/misc/Structures/index.js","components/BDAMobile/misc/Structures/StructureList.jsx","components/BDAMobile/Topbar.jsx","graphql/withFieldData.js","components/BDAMobile/questions/Note.jsx","components/BDAMobile/questions/RadioQuestion.jsx","components/BDAMobile/questions/CardListPicker.jsx","components/BDAMobile/sections/geomorphicResponse.js","components/BDAMobile/questions/TextField.jsx","components/BDAMobile/questions/DropDownQuestion.jsx","components/BDAMobile/questions/DatePicker.jsx","components/BDAMobile/sections/designInfo.js","components/BDAMobile/questions/Photos.jsx","components/common/maps/styles/index.js","components/BDAMobile/questions/LocationPicker.jsx","config.js","components/BDAMobile/sections/positionalAttrib.js","components/BDAMobile/sections/existingFeatures.js","components/BDAMobile/sections/structureDesign.js","components/BDAMobile/questions/PercentSliders/Track.jsx","components/BDAMobile/questions/PercentSliders/Tick.jsx","components/BDAMobile/questions/PercentSliders/Handle.jsx","components/BDAMobile/questions/PercentSliders/PercentSliders.jsx","components/BDAMobile/questions/Checkboxes.jsx","components/BDAMobile/questions/FloodBehavior.jsx","components/BDAMobile/sections/index.js","components/BDAMobile/sections/hydraulicResponse.js","components/BDAMobile/views/StructureViewer.jsx","components/BDAMobile/misc/AddButton.jsx","components/BDAMobile/misc/RefreshStockButton.jsx","components/BDAMobile/sections/Section.jsx","components/BDAMobile/views/TheFormComplex.jsx","components/common/maps/styles/StyleButtons.jsx","components/common/maps/BaseMap.jsx","lib/mapUtil.js","components/BDAMobile/views/HomeMap.jsx","components/BDAMobile/views/Homepage.jsx","registerServiceWorker.js","redux/store.js","index.js","lib/util.js"],"names":["QueryListStructures","gql","_templateObject","QueryGetStructure","_templateObject2","MutationCreateStructure","_templateObject3","MutationUpdateStructure","_templateObject4","MutationDeleteStructure","_templateObject5","withGetStructure","graphql","options","_ref","pollInterval","editing","fetchPolicy","variables","id","guid","props","structure","data","getBDAPOC","Object","objectSpread","body","JSON","parse","withStructuresList","_ref2","structures","listBDAPOCS","items","sort","a","b","lastEdit","withCreateStructure","update","proxy","_ref3","createBDAPOC","query","readQuery","toConsumableArray","filter","struct","concat","console","log","writeQuery","_ref4","ownProps","mutate","createStructure","input","Math","round","Date","getTime","optimisticResponse","__typename","uuid","withDeleteStructure","_ref5","deleteBDAPOC","_ref6","deleteStructure","withUpdateStructure","_ref7","updateBDAPOC","_ref8","updateStructure","stringify","debug","actionConsts","actions","type","defaultState","combineReducers","state","arguments","length","undefined","action","edit","withFormState","compose","connect","name","formGuid","currField","value","note","fields","e","mapProps","objectWithoutProperties","withReduxHome","withHandlers","backToHome","dispatch","editStructure","viewStructure","SIDEBARS","NONE","DELETE","EDIT","withProps","localOnly","indexOf","color","withStateHandlers","sidebarVisible","deleteConfirmVisible","itemClick","editClick","onSwipedLeft","onSwipedRight","closeMenu","stopPropagation","deleteClick","deleteCancel","deleteConfirm","_ref9","_ref$structure","lastedit","react_default","createElement","Sidebar","Pushable","as","List","Item","style","overflow","animation","Menu","icon","inverted","direction","width","visible","onClick","minWidth","Icon","Pusher","Swipeable_default","Segment","minHeight","basic","Label","corner","Header","structureID","getHeader","observationDate","designerName","moment","fontSize","format","getMeta","Confirm","header","open","onCancel","onConfirm","size","Placeholder","pure","autoHeight","autoWidth","aspect","height","className","json","description","title","showSize","finalHeight","finalWidth","minSize","min","iconStyle","widthText","heightText","maxWidth","classes","split","join","Image","toString","defaultProps","SizerWrapper","dist_es","Placeholder_Placeholder","assign","displayName","StructureList","keys","misc_Placeholder","divided","selection","map","idx","Structures_StructureListItem","key","borderRadius","marginBottom","debounceCall","debounce","func","getValueProps","newValProps","newProps","setValue","newVal","oldVal","newObj","defineProperty","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","this","setNote","newNote","oldValues","_callee2","_context2","Note","setOpen","setTempVal","label","placeholder","modalTitle","modalDescription","Note_Trigger","content","Form","TextArea","rows","defaultValue","onChange","modalTtle","Trigger","theStr","len","Message","substring","tempVal","toggleOpen","RadioQuestion","controlledValue","hasNote","notePrompt","rVal","Field","Radio","checked","BDAMobile_questions_Note","branch","present","renderComponent","Content","Description","find","op","Extra","newValue","CardListListItem","image","text","subText","src","CardListPickerItem","selected","toggleValue","Card","link","modalOpen","toggleModal","setModal","val","multiple","newValues","Array","isArray","slice","index","push","splice","CardListPicker_CardListListItem","CardListPicker_CardListPickerItem","Modal","closeIcon","onClose","centered","Responsive","Group","itemsPerRow","Actions","Button","geomorphicResponse","component","CardListPicker","hasNotes","TextField","Input","newval","questions_DropDownQuestion","printValues","otherProps","newOptions","optionvals","extraVals","v","dropdownProps","Dropdown","withFormWrapper","WrappedComponent","InnerComponent","selectorType","iconPosition","popupPosition","closable","Present","DateTimePicker","DateInput","DateTimeInput","designInfo","TimeInput","DatesRangeInput","accept","fluid","DropDownQuestion","styles","toolTip","Satellite","BasicMap","LocationPicker","loading","message","error","viewport","mapboxApiAccessToken","onViewportChange","Grid","columns","Row","Column","latitude","longitude","Dimmer","active","Loader","esm","mapStyle","mapStyles","offsetLeft","offsetTop","textShadow","positive","negative","questions_LocationPicker","zoom","_React$Component","Geolocation","_getPrototypeOf2","_this","classCallCheck","_len","args","_key","possibleConstructorReturn","getPrototypeOf","call","apply","inherits","createClass","_componentWillMount","geolocation","location","_this2","navigator","Promise","resolve","getCurrentPosition","_ref3$coords","coords","sent","setState","React","Component","mapBoxToken","process","config","env","GraphQLEndpoint","Auth","region","userPoolId","userPoolWebClientId","mandatorySignIn","cookieStorage","domain","path","expires","secure","positionalAttrib","existingFeatures","allowMultiple","structureDesign","search","allowAdditions","Track","trackNum","step","source","target","getTrackProps","dynamicStyle","left","percent","Tick","tick","count","marginLeft","d","Handle","disabled","_ref$domain","slicedToArray","max","_ref$handle","handle","getHandleProps","role","aria-valuemin","aria-valuemax","aria-valuenow","onMouseDown","onTouchStart","sliderStyle","position","CustomSlider","onUpdate","react_compound_slider_es","mode","rootStyle","values","getRailProps","handles","PercentSliders_Handle","tracks","PercentSliders_Track","tickVals","ticks","PercentSliders_Tick","_ref13","_ref12","_ref14","sliderValues","reduce","acc","_ref10","_ref11","newLevel","slKey","x","newLimiterThis","newSliderValues","_","cloneDeep","forEach","objKey","mustAddUp","PercentSliders_CustomSlider","controlledValues","Checkbox","GRADIENT","LocationGroup","loc","setLoc","marginTop","toggle","bText","newLoc","behavior","setBehavior","_ref3$value","_ref$value","FloodBehavior_LocationGroup","BDAMobile_sections","PercentSliders","FloodBehavior","Checkboxes","withFieldData","renderNothing","BDAMobile_Topbar","sections","item","paddingLeft","Divider","circular","preventDefault","then","res","require","Section","activeStep","currStep","display","FieldComponent","withState","initProps","confirmStep","ConfirmMenu","newSections","stepHeaders","complete","Step","completed","setActiveStep","setSidebarVisible","Title","steps","TopbarEditing","vertical","attached","ordered","Dimmable","blurring","sections_Section","fixed","zIndex","top","right","StyleButtons","currStyle","setCurrStyle","theStyle","handleChild","child","stylechooser","MapStyles","lockToBounds","maxBounds","pitch","minPitch","maxPitch","bearing","recalcZoomBounds","nextProps","force","minlng","minlat","maxlng","maxlat","maxZoom","minZoom","_nextProps$maxBounds","_maxBounds","boundsChange","numericArrayCompare","sizeChange","_nextProps$maxBounds2","newLat","newLong","newPitch","newBearing","Bearing","_nextProps$size","wmview","WebMercatorViewport","bds","fittedBounds","fitBounds","padding","offset","latitide","zoombounds","oldViewport","lockPan","lockZoom","lifecycle","componentDidMount","_this$props","componentWillReceiveProps","_this$props2","children","_ref$size","onMapDataEvent","onData","styles_StyleButtons","c","findBounds","pts","pt","newAcc","findCenter","sums","noData","_JSON$parse$location$","center","bounds","common_maps_BaseMap","Popup","flowing","trigger","BDAMobile_views_TheFormComplex","StructureViewer","Tab","menu","secondary","border","panes","menuItem","render","Pane","Structures","misc_AddButton","HomeMap","misc_RefreshStockButton","signOut","window","replace","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","reducers","persistState","applyMiddleware","thunkMiddleware","Amplify","configure","deferredPrompt","client","AWSAppSyncClient","url","auth","jwtToken","_jwtToken","currentSession","abrupt","getAccessToken","getJwtToken","complexObjectsCredentials","currentCredentials","AppWithAuth","withAuthenticator","Homepage","addToHomeScreen","document","querySelector","prompt","userChoice","choiceResult","outcome","ReactDOM","es","react_apollo_browser_umd","aws_appsync_react_lib","getElementById","URL","origin","addEventListener","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","a2hsBtn","showAddToHomeScreen","userAgent","toLowerCase","test","isIos","standalone","isNumeric","num","isNaN","parseFloat","isFinite","arr1","arr2","some","el"],"mappings":"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","file":"static/js/main.a588cb9c.chunk.js","sourcesContent":["import gql from 'graphql-tag'\nimport { graphql } from 'react-apollo'\nimport { v4 as uuid } from 'uuid'\n\nconst QueryListStructures = gql`\n  query listBDAPOCS {\n    listBDAPOCS {\n      items {\n        id\n        body\n        lastEdit\n      }\n    }\n  }\n`\n\nconst QueryGetStructure = gql`\n  query getBDAPOC($id:ID!){\n    getBDAPOC(id:$id) {\n      id\n      body\n      lastEdit\n    }\n  }\n`\n\nconst MutationCreateStructure = gql`\n  mutation createBDAPOC($input: CreateBDAPOCInput!) {\n    createBDAPOC(input: $input) {\n      id\n      body\n      lastEdit\n    }\n  }\n`\n\nconst MutationUpdateStructure = gql`\n  mutation updateBDAPOC($input: UpdateBDAPOCInput!) {\n    updateBDAPOC(input: $input) {\n      id\n      body\n      lastEdit\n    }\n  }\n`\n\nconst MutationDeleteStructure = gql`\n  mutation deleteBDAPOC($input: DeleteBDAPOCInput!) {\n    deleteBDAPOC(input: $input) {\n      id\n    }\n  }\n`\n\nexport const withGetStructure = graphql(QueryGetStructure, {\n  options: ({ pollInterval, editing }) => ({\n    fetchPolicy: 'cache-and-network',\n    // pollInterval: pollInterval || 5000\n    variables: { id: editing ? editing.guid : null }\n  }),\n  props: props => ({\n    // debug: console.log('this get structure', props),\n    structure: props.data.getBDAPOC ? {\n      ...props.data.getBDAPOC,\n      body: JSON.parse(props.data.getBDAPOC.body)\n    } : null\n  })\n})\n\nexport const withStructuresList = graphql(QueryListStructures, {\n  options: ({ pollInterval }) => ({\n    fetchPolicy: 'cache-and-network',\n    pollInterval: pollInterval || 5000\n  }),\n  props: props => {\n    const structures = props.data.listBDAPOCS ? props.data.listBDAPOCS.items : []\n    structures.sort((a, b) => b.lastEdit - a.lastEdit)\n    return { structures }\n  }\n})\n\nexport const withCreateStructure = graphql(\n  MutationCreateStructure,\n  {\n    options: {\n      update: (proxy, { data: { createBDAPOC } }) => {\n        const query = QueryListStructures\n        const data = proxy.readQuery({ query })\n        data.listBDAPOCS.items = [\n          ...data.listBDAPOCS.items.filter(struct => !createBDAPOC || struct.id !== createBDAPOC.id),\n          createBDAPOC\n        ]\n        console.log('update', { data, createBDAPOC })\n        proxy.writeQuery({ query, data })\n      }\n    },\n    props: ({ ownProps, mutate }) => ({\n      createStructure: structure => mutate({\n        variables: {\n          input: {\n            ...structure,\n            lastEdit: Math.round(new Date().getTime() / 1000)\n          }\n        },\n        optimisticResponse: () => ({\n          __typename: 'Mutation',\n          createBDAPOC: {\n            ...structure,\n            id: `pending${uuid()}`,\n            lastEdit: Math.round(new Date().getTime() / 1000),\n            __typename: 'BDAPOC'\n          }\n        })\n      })\n    })\n  }\n)\n\nexport const withDeleteStructure = graphql(\n  MutationDeleteStructure,\n  {\n    options: {\n      update: (proxy, { data: { deleteBDAPOC } }) => {\n        const query = QueryListStructures\n        const data = proxy.readQuery({ query })\n        data.listBDAPOCS.items = data.listBDAPOCS.items\n          .filter(struct => !deleteBDAPOC || struct.id !== deleteBDAPOC.id)\n        proxy.writeQuery({ query, data })\n      }\n    },\n    props: ({ ownProps, mutate }) => ({\n      deleteStructure: structure => mutate({\n        variables: { input: structure },\n        optimisticResponse: () => ({\n          __typename: 'Mutation',\n          deleteBDAPOC: {\n            ...structure,\n            __typename: 'BDAPOC'\n          }\n        })\n      })\n    })\n  }\n)\n\nexport const withUpdateStructure = graphql(\n  MutationUpdateStructure,\n  {\n    options: {\n      update: (proxy, { data: { updateBDAPOC } }) => {\n        const query = QueryListStructures\n        const data = proxy.readQuery({ query })\n        data.listBDAPOCS.items = [\n          ...data.listBDAPOCS.items.filter(struct => !updateBDAPOC || struct.id !== updateBDAPOC.id),\n          updateBDAPOC\n        ]\n        proxy.writeQuery({ query, data })\n      }\n    },\n    props: ({ ownProps, mutate }) => ({\n      updateStructure: structure => mutate({\n        variables: { input: {\n          ...structure,\n          body: JSON.stringify(structure.body),\n          lastEdit: Math.round(new Date().getTime() / 1000)\n        } },\n        debug: console.log(structure),\n        optimisticResponse: () => ({\n          __typename: 'Mutation',\n          updateBDAPOC: {\n            ...structure,\n            body: JSON.stringify(structure.body),\n            lastEdit: Math.round(new Date().getTime() / 1000),\n            __typename: 'BDAPOC'\n          }\n        })\n      })\n    })\n  }\n)\n","import { combineReducers } from 'redux'\nexport const actionConsts = {\n  EDIT_STRUCTURE: 'EDIT_STRUCTURE',\n  VIEW_STRUCTURE: 'VIEW_STRUCTURE',\n  BACK_TO_HOME: 'BACK_TO_HOME'\n}\n\n/**\n * Actions are actually just really simple objects\n */\nexport const actions = {\n  backToHome: () => ({ type: actionConsts.BACK_TO_HOME }),\n  editStructure: (guid) => ({ type: actionConsts.EDIT_STRUCTURE, guid }),\n  viewStructure: (guid) => ({ type: actionConsts.VIEW_STRUCTURE, guid })\n}\n\nconst defaultState = {\n  editing: null\n}\n\nconst editing = (state = defaultState.editing, action) => {\n  switch (action.type) {\n    case actionConsts.EDIT_STRUCTURE:\n      return {\n        guid: action.guid,\n        edit: true\n      }\n    case actionConsts.VIEW_STRUCTURE:\n      return {\n        guid: action.guid,\n        edit: false\n      }\n    case actionConsts.BACK_TO_HOME:\n      return null\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  editing\n})\n","import { compose, withHandlers, mapProps } from 'recompose'\nimport { actions } from './reducers'\nimport { connect } from 'react-redux'\n\nconst mapStateToFieldProps = (state, props) => {\n  const { editing, structures } = state\n  const { name } = props\n  let formGuid = ''\n  let currField = { value: '', note: '' }\n  try {\n    currField = structures[editing.guid].fields[name] || {}\n    formGuid = editing.guid\n  }\n  catch (e) { }\n  return {\n    formGuid,\n    value: currField.value,\n    note: currField.note\n  }\n}\n\nexport const withFormState = compose(\n  connect(mapStateToFieldProps), // Once connect() is composed `dispatch` is prop.\n  // Make sure dispatch and formGuid never make it to the individual components\n  mapProps(({ formGuid, ...otherProps }) => otherProps)\n)\n\nconst mapStateToHomeProps = ({ editing }, props) => ({\n  editing\n})\n\n/**\n * HOMEPAGE state\n */\n\nexport const withReduxHome = compose(\n  connect(mapStateToHomeProps), // Once connect() is composed `dispatch` is prop.\n  withHandlers({\n    backToHome: ({ dispatch }) => () => {\n      // console.log('backToHome called')\n      dispatch(actions.backToHome())\n    },\n    editStructure: ({ dispatch }) => (guid) => {\n      console.log('editStructure called', guid)\n      dispatch(actions.editStructure(guid))\n    },\n    viewStructure: ({ dispatch }) => (guid) => {\n      // console.log('viewStructure called', guid)\n      dispatch(actions.viewStructure(guid))\n    }\n  })\n)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport moment from 'moment'\nimport Swipeable from 'react-swipeable'\nimport { withDeleteStructure } from '../../../../graphql/queries'\nimport { withReduxHome } from '../../../../redux/withRedux'\nimport { List, Sidebar, Menu, Icon, Segment, Header, Confirm, Label } from 'semantic-ui-react'\nimport { compose, withStateHandlers, withProps } from 'recompose'\n\nconst StructureListItem = ({\n  structure: { id, lastedit, body }, color,\n  sidebarVisible, onSwipedRight, onSwipedLeft, editClick, itemClick, localOnly,\n  deleteConfirmVisible, deleteClick, deleteCancel, deleteConfirm\n}) => (\n  <Sidebar.Pushable as={List.Item}>\n    <Sidebar\n      style={{ overflow: 'hidden' }}\n      animation='push'\n      as={Menu}\n      icon='labeled'\n      inverted\n      direction='right'\n      color='red'\n      width='very thin'\n      visible={sidebarVisible === SIDEBARS.DELETE} >\n      <Menu.Item onClick={deleteClick} style={{ minWidth: '4em' }}>\n        <Icon name='trash' /> Delete\n      </Menu.Item>\n    </Sidebar>\n    <Sidebar\n      style={{ overflow: 'hidden' }}\n      animation='push'\n      as={Menu}\n      icon='labeled'\n      inverted\n      direction='left'\n      color='blue'\n      width='very thin'\n      visible={sidebarVisible === SIDEBARS.EDIT} >\n      <Menu.Item onClick={editClick} style={{ minWidth: '4em' }}>\n        <Icon name='edit' /> Edit\n      </Menu.Item>\n    </Sidebar>\n    <Sidebar.Pusher>\n      <Swipeable onSwipedLeft={onSwipedLeft} onSwipedRight={onSwipedRight}>\n        <Segment style={{ minHeight: 85 }} onClick={itemClick} basic >\n          { localOnly === true ? <Label icon='refresh' as='a' color='yellow' corner /> : null}\n          <Header inverted onClick={() => {}}>\n            {getHeader(JSON.parse(body))}\n          </Header>\n          {getMeta(JSON.parse(body))}\n        </Segment>\n      </Swipeable>\n    </Sidebar.Pusher>\n    <Confirm\n      header='Delete Structure?'\n      open={deleteConfirmVisible}\n      onCancel={deleteCancel}\n      onConfirm={deleteConfirm}\n      size='large'\n    />\n  </Sidebar.Pushable>\n)\n\nStructureListItem.propTypes = {\n  structure: PropTypes.object,\n  color: PropTypes.string,\n  localOnly: PropTypes.bool,\n  // recompose\n  sidebarVisible: PropTypes.number,\n  deleteConfirmVisible: PropTypes.bool,\n  onSwipedLeft: PropTypes.func,\n  onSwipedRight: PropTypes.func,\n  itemClick: PropTypes.func,\n  editClick: PropTypes.func,\n  deleteClick: PropTypes.func,\n  deleteCancel: PropTypes.func,\n  deleteConfirm: PropTypes.func\n  // from redux\n  // viewStructure: PropTypes.func\n}\n\nconst SIDEBARS = {\n  NONE: null,\n  DELETE: 1,\n  EDIT: -1\n}\n\nexport default compose(\n  withReduxHome,\n  withProps(({ structure: { id } }) => {\n    const localOnly = id.indexOf('pending') === 0\n    let color = null\n    if (localOnly === true) color = 'yellow'\n    // else if (!uploading && !uploaded && uploadFailed) color = 'red'\n    return { color, localOnly }\n  }),\n  withDeleteStructure,\n  withStateHandlers(\n    {\n      sidebarVisible: SIDEBARS.NONE,\n      deleteConfirmVisible: false\n    },\n    {\n      itemClick: ({ sidebarVisible }, { structure: { id }, viewStructure }) => (e) => {\n        // console.log('click', e, sidebarVisible, id)\n        if (sidebarVisible !== SIDEBARS.NONE) return { sidebarVisible: SIDEBARS.NONE }\n        else {\n          viewStructure(id)\n        }\n      },\n      editClick: ({ sidebarVisible }, { structure: { id }, editStructure }) => (e) => {\n        // console.log('click EDIT', e, sidebarVisible, id)\n        editStructure(id)\n      },\n      onSwipedLeft: ({ sidebarVisible }) => () => {\n        switch (sidebarVisible) {\n          case SIDEBARS.NONE:\n            return { sidebarVisible: SIDEBARS.DELETE }\n          case SIDEBARS.EDIT:\n            return { sidebarVisible: SIDEBARS.NONE }\n          default:\n            break\n        }\n      },\n      onSwipedRight: ({ sidebarVisible }) => () => {\n        switch (sidebarVisible) {\n          case SIDEBARS.NONE:\n            return { sidebarVisible: SIDEBARS.EDIT }\n          case SIDEBARS.DELETE:\n            return { sidebarVisible: SIDEBARS.NONE }\n          default:\n            break\n        }\n      },\n      closeMenu: () => (e) => {\n        e.stopPropagation() // Make sure we don't accidentally trigger  click\n        return { sidebarVisible: SIDEBARS.NONE }\n      },\n      deleteClick: () => () => ({ deleteConfirmVisible: true }),\n      deleteCancel: () => () => ({ deleteConfirmVisible: false, sidebarVisible: SIDEBARS.NONE }),\n      deleteConfirm: (state, { deleteStructure, structure }) => () => {\n        deleteStructure({ id: structure.id })\n        return { deleteConfirmVisible: false, sidebarVisible: SIDEBARS.NONE }\n      }\n    }\n  )\n)(StructureListItem)\n\n// <Label.Group className='projListDownloadLabels'>\n//   {/* { !uploaded && !uploadFailed && !uploading ? <Popup header='Not Uploaded' content='This structure has not been Uploaded'\n//     trigger={<Label icon='upload' as='a' color='yellow' content='Click to sync' onClick={() => uploadStructure(guid)} />}\n//   /> : null } */}\n//   { uploaded ? <Popup header='Uploaded!' content='This structure has been Uploaded'\n//     trigger={<Label color='green' icon='check' content='Synced' />}\n//   /> : null }\n//   { !uploading && !uploaded && uploadFailed ? <Popup header='Upload Error' content='Try uploading again!'\n//     trigger={<Label color='red' icon='bug' as='a' content='Sync error' onClick={() => { }} />}\n//   /> : null }\n//   { uploading ? <Popup header='Uploading...' content='Fingers crossed!'\n//     trigger={<Label icon={{ name: 'circle notch', loading: true }} content='Uploading...' />}\n//   /> : null }\n// </Label.Group>\n\n/**\n * Heler function to make the header nice\n */\nfunction getHeader (fields) {\n  try {\n    return fields.structureID.value\n  }\n  catch (e) {\n    return <span style={{ color: 'red' }} >NO NAME</span>\n  }\n}\n\n/**\n * Helper function to style the meta fields and date and stuff\n */\nfunction getMeta (fields) {\n  let observationDate\n  let designerName\n  try {\n    observationDate = moment(new Date(fields.observationDate.value))\n  }\n  catch (e) { }\n  try {\n    designerName = fields.designerName.value\n  }\n  catch (e) { }\n\n  return <div>\n    <div>{designerName ? <span>Designed by <strong>{designerName}</strong> </span> : null}</div>\n    <div style={{ fontSize: '0.9rem', color: '#888' }}>{observationDate ? <span> on <strong>{observationDate.format('dddd, MMMM Do') }</strong> </span> : null}</div>\n  </div>\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { AutoSizer } from 'react-virtualized'\nimport { Icon, Header, Image } from 'semantic-ui-react'\nimport { pure } from 'recompose'\nimport './Placeholder.css'\n\nconst Placeholder = pure(({\n  autoHeight, autoWidth, aspect, width, height,\n  className, json, description, title, icon, showSize\n}) => {\n  let finalHeight = height || autoHeight\n  let finalWidth = width || autoWidth\n\n  if (aspect) {\n    finalHeight = aspect * finalWidth\n  }\n\n  const minSize = Math.min(finalHeight, finalWidth)\n  const minIconFontSize = minSize * 6\n  const iconStyle = {\n    fontSize: `${minIconFontSize}%`\n    // marginTop: `${(height - minIconFontSize) / 2}px`\n  }\n\n  const widthText = `${finalWidth}px`\n  const heightText = `${finalHeight}px`\n  const style = {\n    maxWidth: widthText,\n    width: widthText,\n    height: heightText\n  }\n  const classes = ['myPlaceholder'].concat(className.split(' ')).join(' ')\n  return (\n    <Image className={classes} style={style}>\n      {icon ? <Icon name={icon} style={iconStyle} /> : null}\n      <div className='centered'>\n        {title ? <Header>{title.toString()}</Header> : null}\n        {showSize ? (\n          <div className='sizeText'>\n            {`${widthText} X ${heightText}`}\n          </div>\n        ) : null}\n        {description ? <p className='description'>{description}</p> : null}\n        {json ? (\n          <div className='json'><pre><code>\n            {JSON.stringify(json, null, 2)}\n          </code></pre></div>\n        ) : null}\n      </div>\n    </Image>\n  )\n})\n\nPlaceholder.propTypes = {\n  // from the autosizer component\n  autoHeight: PropTypes.number,\n  autoWidth: PropTypes.number,\n  className: PropTypes.string,\n  // These are passed in (maybe)\n  height: PropTypes.number,\n  width: PropTypes.number,\n  aspect: PropTypes.number,\n  json: PropTypes.object,\n  description: PropTypes.string,\n  icon: PropTypes.string,\n  showSize: PropTypes.bool,\n  title: PropTypes.string,\n  // from recompose\n  size: PropTypes.object\n}\nPlaceholder.defaultProps = {\n  className: ''\n}\n\nconst SizerWrapper = ({ minHeight, ...props }) => (\n  <div style={{\n    minHeight,\n    height: minHeight ? '100%' : null\n  }}>\n    <AutoSizer>\n      {({ height, width }) => (\n        <Placeholder autoHeight={height} autoWidth={width} {...props} />\n      )}\n    </AutoSizer>\n  </div>\n)\nSizerWrapper.displayName = 'Placeholder'\nexport default SizerWrapper\n","import StructureList from './StructureList'\n\nexport default StructureList\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { List } from 'semantic-ui-react'\nimport StructureListItem from './StructureListItem'\nimport Placeholder from '../../../misc/Placeholder'\n\nconst StructureList = ({ structures }) => (\n  <div className='structureList'>\n    { !structures || Object.keys(structures).length === 0\n      ? <Placeholder minHeight={400} icon='list' title='No Structures Found' />\n      : null }\n    <List divided selection>\n      {structures.map((structure, idx) => (\n        <StructureListItem structure={structure} key={`structItem${structure.id}`} />\n      ))}\n    </List>\n  </div>\n)\n\nStructureList.propTypes = {\n  structures: PropTypes.array\n}\n\nexport default StructureList\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Menu, Icon } from 'semantic-ui-react'\nimport { withReduxHome } from '../../redux/withRedux'\n\nconst Topbar = ({ editing, backToHome }) => (\n  <Menu icon inverted style={{ borderRadius: 0, marginBottom: 0 }}>\n    {editing && editing.guid\n      ? <Menu.Item name='bars' onClick={() => backToHome()}>\n        <Icon name='arrow left' />\n      </Menu.Item>\n      : null\n    }\n    <Menu.Item header>Project Homepage</Menu.Item>\n  </Menu>\n)\n\nTopbar.propTypes = {\n  editing: PropTypes.object,\n  createStructure: PropTypes.func,\n  // from redux\n  backToHome: PropTypes.func\n}\n\nexport default withReduxHome(Topbar)\n","import { compose, withHandlers } from 'recompose'\nimport { withGetStructure, withUpdateStructure } from './queries'\nimport { debounce } from 'lodash'\n\n// Utilizing closures to debounce functions from props.\n// If debounce is applied within the component, the \"debounced function\"\n// will change each time. By defining it statically here, react will always\n// consider this to be the same function.\nconst debounceCall = debounce(func => func(), 1000)\n\nexport default compose(\n  // Here's the query that gives us structure\n  withGetStructure,\n  withUpdateStructure,\n  // ONCE we mount the control we should initialize it\n  withHandlers({\n    getValueProps: ({ structure, updateStructure, ...props }) => (name) => {\n      let newValProps = {\n        value: null,\n        note: null\n      }\n      const newProps = {\n        setValue: newVal => {\n          console.log('setValue called', { structure, name, newVal, updateStructure })\n          let oldVal = { }\n          try {\n            oldVal = structure.body[name]\n          }\n          catch (e) { }\n\n          const newObj = { [name]: Object.assign({}, oldVal, { value: newVal }) }\n          if (structure && structure.id) {\n            // Debouncing is critical so that we don't get a network call for every keystroke\n            debounceCall(async () => {\n              console.log('ACTUAL CALL')\n              await updateStructure({\n                id: structure.id,\n                body: Object.assign({}, structure.body, newObj)\n              })\n            })\n          }\n        },\n        setNote: newNote => {\n          console.log('setNote called', { structure, name, newNote, updateStructure })\n          let oldValues = { }\n          try {\n            oldValues = structure.body[name]\n          }\n          catch (e) { }\n\n          const newObj = { [name]: Object.assign({}, oldValues, { note: newNote }) }\n          if (structure && structure.id) {\n            // Debouncing is critical so that we don't get a network call for every keystroke\n            debounceCall(async () => {\n              console.log('ACTUAL CALL')\n              await updateStructure({\n                id: structure.id,\n                body: Object.assign({}, structure.body, newObj)\n              })\n            })\n          }\n        }\n      }\n      try {\n        newValProps = structure.body[name]\n      }\n      catch (e) { }\n\n      return Object.assign({}, newValProps, newProps)\n    }\n  })\n)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Message, TextArea, Confirm, Form, Icon, Segment } from 'semantic-ui-react'\nimport { compose, withStateHandlers } from 'recompose'\nimport './Note.css'\n\nconst Note = ({ name, value, open, setOpen, setValue, setTempVal, label, placeholder, modalTitle, modalDescription }) => (\n  <div>\n    <Trigger label={label} value={value} onClick={() => setOpen(true)} />\n    <Confirm\n      header={modalTitle}\n      open={open}\n      onCancel={() => setOpen(false)}\n      onConfirm={setValue}\n      content={(\n        <Segment basic>\n          <p>{modalDescription}</p>\n          <Form>\n            <TextArea name={name} placeholder={placeholder} rows={10} defaultValue={value} onChange={setTempVal} />\n          </Form>\n        </Segment>\n      )}\n    />\n  </div>\n\n)\n\nNote.defaultProps = {\n  name: 'NOTES',\n  label: 'Add a note...',\n  modalTtle: 'Add a note:'\n}\n\nNote.propTypes = {\n  name: PropTypes.string,\n  value: PropTypes.string,\n  open: PropTypes.bool,\n  label: PropTypes.string,\n  modalTitle: PropTypes.string,\n  placeholder: PropTypes.string,\n  modalDescription: PropTypes.string,\n  setOpen: PropTypes.func,\n  setValue: PropTypes.func,\n  setTempVal: PropTypes.func\n}\n\nconst Trigger = ({ label, value, onClick }) => (\n  <Message className='notesMessage' onClick={onClick}>\n    <Message.Header>\n      <Icon name='pencil' />{label}\n    </Message.Header>\n    {value && value.length > 0 ? (<span className='notesVal'>{getShortString(value, 66)}</span>) : ''}\n  </Message>\n)\n\nTrigger.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.string,\n  onClick: PropTypes.func\n}\n\nexport default compose(\n  withStateHandlers(\n    {\n      tempVal: '', // The value as it's changing\n      open: false\n    },\n    {\n      toggleOpen: ({ open }) => ({ open: !open }),\n      setOpen: () => (open) => ({ open }),\n      setTempVal: () => (e, { value }) => ({ tempVal: value }),\n      setValue: ({ tempVal }, { setValue }) => () => {\n        setValue(tempVal) // this goes to redux\n        return ({ open: false })\n      }\n    }\n  )\n)(Note)\n\n/**\n * Helper function to truncate a string\n */\nfunction getShortString (theStr, len) {\n  return theStr.length > len ? theStr.substring(0, len) + '...' : theStr\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, Radio, Header, Segment, Item } from 'semantic-ui-react'\nimport Note from './Note'\nimport { compose, branch, renderComponent, withStateHandlers, pure } from 'recompose'\n\nexport const RadioQuestion = ({ title, name, options, controlledValue, hasNote, note, notePrompt, setValue, setNote }) => (\n  <Segment basic className='BDAFormField'>\n    <Header as='h3'>{title}</Header>\n    {options.map(({ label, value: rVal }, idx) => (\n      <Form.Field key={idx}>\n        <Radio\n          label={label}\n          name={name}\n          value={rVal}\n          checked={controlledValue !== null && rVal === controlledValue}\n          onChange={() => setValue(rVal)}\n        />\n      </Form.Field>\n    ))}\n    {!hasNote ? null\n      : <Note\n        label={notePrompt}\n        value={note}\n        setValue={setNote}\n        modalTitle={`${title}: ${notePrompt}`}\n      />}\n  </Segment>\n)\n\nRadioQuestion.propTypes = {\n  title: PropTypes.string,\n  options: PropTypes.arrayOf(PropTypes.object),\n  controlledValue: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  setValue: PropTypes.func,\n\n  // Now the note stuff\n  note: PropTypes.string,\n  notePrompt: PropTypes.string,\n  hasNote: PropTypes.bool,\n  setNote: PropTypes.func\n}\nRadioQuestion.defaultProps = {\n  setValue: () => console.log('setValue NOT SET'),\n  setNote: () => console.log('setNote NOT SET')\n}\n\nconst Present = ({ title, value, options, note }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{title}</Item.Header>\n      <Item.Description>\n        {value ? options.find(op => op.value === value).label\n          : <h4 style={{ color: 'red' }}>Not Entered</h4>}\n      </Item.Description>\n      {note ? <Item.Extra>Note: <em>{note}</em></Item.Extra> : null }\n    </Item.Content>\n  </Item>\n)\n\nPresent.propTypes = RadioQuestion.propTypes\n\nexport default compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  withStateHandlers(\n    // To keep things responsive we turn this into a fulle managed component\n    ({ value }) => ({ controlledValue: value }),\n    {\n      setValue: (state, { setValue }) => (newValue) => {\n        if (setValue) setValue(newValue)\n        return { controlledValue: newValue }\n      }\n    }\n  )\n)(RadioQuestion)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Note from './Note'\nimport { Image, Header, Segment, Card, Responsive, List, Modal, Button, Item, Icon } from 'semantic-ui-react'\nimport { compose, withStateHandlers, mapProps, branch, renderComponent } from 'recompose'\nimport Placeholder from '../../misc/Placeholder'\nimport './CardListPicker.css'\n\nconst CardListPicker = ({ title, options, hasNote, note, notePrompt, placeholder, value, setNote, toggleValue, modalOpen, setModal }) => {\n  const items = options.map((op, idx) => (\n    <CardListPickerItem\n      key={idx}\n      toggleValue={toggleValue}\n      selected={value && Array.isArray(value) && value.indexOf(op.value) > -1}\n      placeholder={placeholder}\n      {...op}\n    />))\n\n  return (\n    <Segment className='BDAFormField'>\n      <Header as='h3'>{title}</Header>\n      <Modal closeIcon id='cardListModal' open={modalOpen} onClose={() => setModal(false)} centered={false}>\n        <Modal.Header>Select a Photo</Modal.Header>\n        <Modal.Content>\n          <Responsive as='div' maxWidth={499}>\n            <Card.Group itemsPerRow={3} centered>\n              {items}\n            </Card.Group>\n          </Responsive>\n          <Responsive as='div' minWidth={500}>\n            <Card.Group itemsPerRow={4} centered>\n              {items}\n            </Card.Group>\n          </Responsive>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button color='green' onClick={() => setModal(false)}>\n            <Icon name='checkmark' /> Ok\n          </Button>\n        </Modal.Actions>\n      </Modal>\n      <Button onClick={() => setModal(true)}>Choose...</Button>\n      <List onClick={() => setModal(true)}>\n        {options.filter(op => value.indexOf(op.value) === 0).map((op, idx) => <CardListListItem\n          key={idx}\n          selected={value.indexOf(op.value) === 0}\n          placeholder={placeholder}\n          {...op} />)}\n      </List>\n      {!hasNote ? null\n        : <Note\n          label={notePrompt}\n          value={note}\n          setValue={setNote}\n          modalTitle={`${title}: ${notePrompt}`}\n        />}\n    </Segment>\n  )\n}\n\nCardListPicker.propTypes = {\n  title: PropTypes.string,\n  value: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.string\n  ]),\n  toggleValue: PropTypes.func,\n  setModal: PropTypes.func,\n  options: PropTypes.array,\n  hasNotes: PropTypes.bool,\n  modalOpen: PropTypes.bool,\n  placeholder: PropTypes.object, // This is for design only\n\n  // Now the note stuff\n  note: PropTypes.string,\n  notePrompt: PropTypes.string,\n  hasNote: PropTypes.bool,\n  setNote: PropTypes.func\n}\n\nconst CardListListItem = ({ image, text, subText, placeholder }) => (\n  <List.Item>\n    {\n      placeholder\n        ? <Placeholder {...placeholder} minHeight={50} />\n        : <Image src={image} width='100' />\n    }\n    <List.Content>\n      <List.Header>{text}</List.Header>\n      {subText && subText.length > 0 ? <List.Description>{subText}</List.Description> : null }\n    </List.Content>\n  </List.Item>\n)\nCardListListItem.propTypes = {\n  image: PropTypes.string,\n  text: PropTypes.string,\n  subText: PropTypes.string,\n  placeholder: PropTypes.object // This is for design only\n}\n\nconst CardListPickerItem = ({ image, text, value, subText, selected, placeholder, toggleValue }) => (\n  <Card link onClick={() => toggleValue(value)} className={selected ? 'active' : ''}>\n    {\n      placeholder\n        ? <Placeholder {...placeholder} minHeight={200} />\n        : <Image src={image} width={200} />\n    }\n    <Card.Content>\n      <Card.Header>{text}</Card.Header>\n      {/* <Card.Meta>{tool.context}</Card.Meta> */}\n      {subText && subText.length > 0 ? <Card.Description>{subText}</Card.Description> : null }\n    </Card.Content>\n  </Card>\n)\n\nCardListPickerItem.propTypes = {\n  image: PropTypes.string,\n  value: PropTypes.string,\n  text: PropTypes.string,\n  subText: PropTypes.string,\n  toggleValue: PropTypes.func,\n  selected: PropTypes.bool,\n  placeholder: PropTypes.object // This is for design only\n}\n\nconst Present = ({ title, options, value, placeholder }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{title}</Item.Header>\n      <Item.Description>\n        <List >\n          {options.filter(op => value.indexOf(op.value) === 0).map((op, idx) => <CardListListItem\n            key={idx}\n            selected={value.indexOf(op.value) === 0}\n            placeholder={placeholder}\n            {...op} />)}\n        </List>\n      </Item.Description>\n    </Item.Content>\n  </Item>\n)\n\nPresent.propTypes = CardListPicker.propTypes\n\nexport default compose(\n  withStateHandlers(\n    {\n      modalOpen: false\n    },\n    {\n      toggleModal: ({ modalOpen }) => () => ({ modalOpen: !modalOpen }),\n      setModal: () => (val) => ({ modalOpen: val }),\n      toggleValue: (state, { value, multiple, setValue }) => val => {\n        if (multiple) {\n          let newValues = []\n          if (Array.isArray(value)) newValues = value.slice(0)\n\n          const index = newValues.indexOf(val)\n          if (index < 0) newValues.push(val)\n          else newValues.splice(index, 1)\n          setValue(newValues)\n        }\n        else {\n          setValue(val)\n          return { modalOpen: false }\n        }\n      }\n    }\n  ),\n  mapProps(props => ({\n    ...props,\n    value: props.value || []\n  })),\n  branch(({ present }) => !!present, renderComponent(Present))\n)(CardListPicker)\n","\nimport RadioQuestion from '../questions/RadioQuestion'\nimport CardListPicker from '../questions/CardListPicker'\n\nexport default {\n  title: 'Anticipated Geomorphic Responses',\n  description: 'What geomorphic response do you anticipate?',\n  fields: [\n    // Geomorphic Responses\n    {\n      component: RadioQuestion,\n      title: 'Pond Capacity (First Year Floods)',\n      name: 'pondCapacityFirstYear',\n      options: [\n        { label: 'Clean', value: 'CLEAN' },\n        { label: 'Minor Sedimentation', value: 'MINOR' },\n        { label: 'Partial Filling (up to 50% of original pond capacity)', value: 'PARTIAL' },\n        { label: 'Major Filling (up to 50% of original pond capacity)', value: 'MAJOR' },\n        { label: 'Full Sediment', value: 'FULL' }\n      ]\n    },\n\n    {\n      component: RadioQuestion,\n      title: 'Pond Capacity (If Big Floods)',\n      name: 'pondCapacityBigFlood',\n      options: [\n        { label: 'Clean', value: 'CLEAN' },\n        { label: 'Minor Sedimentation', value: 'MINOR' },\n        { label: 'Partial Filling (up to 50% of original pond capacity)', value: 'PARTIAL' },\n        { label: 'Major Filling (up to 50% of original pond capacity)', value: 'MAJOR' },\n        { label: 'Full Sediment', value: 'FULL' }\n      ]\n    },\n    {\n      component: CardListPicker,\n      title: 'Expected Dominant Substrate Upstream of Structure',\n      name: 'upstreamSubstrate',\n      options: [\n        { image: './images/substrate/fines.png', value: 'Fines', text: 'Fines' },\n        { image: './images/substrate/sand.png', value: 'Sands', text: 'Sands' },\n        { image: './images/substrate/gravel.png', value: 'Gravels', text: 'Gravels' },\n        { image: './images/substrate/cobble.png', value: 'Cobble', text: 'Cobble' },\n        { image: './images/substrate/food_cache.png', value: 'Food Cache & Fines', text: 'Food Cache & Fines' }\n      ]\n    },\n\n    {\n      component: CardListPicker,\n      title: 'Expected Dominant Substrate Downstream of Structure',\n      name: 'downstreamSubstrate',\n      options: [\n        { image: './images/substrate/fines.png', value: 'Fines', text: 'Fines' },\n        { image: './images/substrate/sand.png', value: 'Sands', text: 'Sands' },\n        { image: './images/substrate/gravel.png', value: 'Gravels', text: 'Gravels' },\n        { image: './images/substrate/cobble.png', value: 'Cobble', text: 'Cobble' },\n        { image: './images/substrate/food_cache.png', value: 'Food Cache & Fines', text: 'Food Cache & Fines' }\n      ]\n    },\n\n    {\n      component: CardListPicker,\n      title: 'Expected Geomorphic Units at Structure Location',\n      name: 'expectedUnitsAtStruct',\n      hasNotes: true,\n      options: [\n        { image: './images/gut/planar_plane.png', value: 'Planar', text: 'Planar' },\n        { image: './images/gut/convexity_mound.png', value: 'Convexity', text: 'Convexity (bar)' },\n        { image: './images/gut/convexity_saddle.png', value: 'Saddle', text: 'Saddle (riffle)' },\n        { image: './images/gut/concavity_bowl.png', value: 'Concavity', text: 'Concavity (true pool)' },\n        { image: './images/gut/concavity_trough.png', value: 'Trough', text: 'Trough (shallow thalweg or chute)' },\n        { image: './images/gut/planar_wall.png', value: 'WallEdge', text: 'Wall: Bank' },\n        { image: './images/gut/planar_wall.png', value: 'WallBank', text: 'Wall: Edge' }\n      ]\n    },\n    {\n      component: RadioQuestion,\n      title: 'Expected Structural Elements at Structure Location',\n      name: 'expectedElementsAtStruct',\n      hasNotes: true,\n      options: [\n        { label: 'Roots', value: 'CLEAN' },\n        { label: 'Live Trees / Shrubs', value: 'MINOR' },\n        { label: 'Aquatic Vegetation', value: 'PARTIAL' },\n        { label: 'Boulder(s)', value: 'MAJOR' },\n        { label: 'Woody Debris', value: 'FULL' },\n        { label: 'Wall: Bank', value: 'FULL' },\n        { label: 'Wall: Bar Edge', value: 'FULL' }\n      ]\n    }\n  ]\n\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, Header, Segment, Input, Item } from 'semantic-ui-react'\nimport { compose, branch, renderComponent, withStateHandlers, pure } from 'recompose'\n\nexport const TextField = ({ label, placeholder, type, controlledValue, setValue }) => (\n  <Segment basic className='BDAFormField'>\n    <Header as='h3'>{label}</Header>\n    <Form.Field>\n      <Input type={type}\n        value={controlledValue}\n        placeholder={placeholder}\n        onChange={(e, { value: newval }) => setValue(newval)} />\n    </Form.Field>\n  </Segment>\n)\n\nTextField.propTypes = {\n  label: PropTypes.string,\n  placeholder: PropTypes.string,\n  type: PropTypes.string,\n\n  controlledValue: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  setValue: PropTypes.func\n}\nTextField.defaultProps = {\n  setValue: () => console.log('setValue NOT SET')\n}\n\nconst Present = ({ label, value }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{label}</Item.Header>\n      <Item.Description>\n        {value || <h4 style={{ color: 'red' }}>Not Entered</h4>}\n      </Item.Description>\n    </Item.Content>\n  </Item>\n)\n\nPresent.propTypes = TextField.propTypes\n\nexport default compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  withStateHandlers(\n    ({ value }) => ({ controlledValue: value }),\n    {\n      setValue: (state, { setValue }) => (newVal) => {\n        setValue(newVal)\n        return { controlledValue: newVal }\n      }\n    }\n  )\n)(TextField)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n// import _ from 'lodash'\nimport { Dropdown, Segment, Header, Item } from 'semantic-ui-react'\nimport Note from './Note'\nimport { compose, branch, renderComponent, mapProps } from 'recompose'\n\nconst DropDownQuestion = ({\n  title, formGuid, hasNote, dispatch, note, notePrompt, present, setValue, setNote, ...dropdownProps\n}) => (\n  <Segment basic className='BDAFormField'>\n    <Header as='h3'>{title}</Header>\n    <Dropdown {...dropdownProps} onChange={(e, { value }) => setValue(value)} />\n    {!hasNote ? null\n      : <Note\n        label={notePrompt}\n        value={note}\n        setValue={setNote}\n        modalTitle={`${title}: ${notePrompt}`}\n      />}\n  </Segment>\n)\n\nDropDownQuestion.propTypes = {\n  title: PropTypes.string,\n  dropdownProps: PropTypes.object,\n\n  setValue: PropTypes.func,\n\n  // Now the note stuff\n  note: PropTypes.string,\n  notePrompt: PropTypes.string,\n  hasNote: PropTypes.bool,\n  setNote: PropTypes.func\n}\n\nconst Present = ({ title, value, options, note }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{title}</Item.Header>\n      <Item.Description>\n        {printValues(value, options)}\n      </Item.Description>\n      {note ? <Item.Extra>Note: <em>{note}</em></Item.Extra> : null }\n    </Item.Content>\n  </Item>\n)\nfunction printValues (value, options) {\n  if (Array.isArray(value) && value.length > 0) {\n    return (\n      <ul>\n        {\n          value.map((val, idx) => {\n            let text = val\n            try {\n              text = options.find(op => op.value === val).text\n            }\n            catch (e) {}\n            return (<li key={`item-${idx}`}>{text}</li>)\n          })\n        }\n      </ul>\n    )\n  }\n  else if (value && !Array.isArray(value)) {\n    return options.find(op => op.value === value).text\n  }\n  else {\n    return <h4 style={{ color: 'red' }}>Not Entered</h4>\n  }\n}\n\nPresent.propTypes = DropDownQuestion.propTypes\n\nexport default compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  // Wrap setvalue because it can be multiples\n  mapProps(({ options, multiple, value, ...otherProps }) => {\n    let newVal\n    let newOptions = []\n    // dropdowns need a default state\n    if (multiple) {\n      newVal = Array.isArray(value) ? value : []\n      const optionvals = options.map(op => op.value)\n      const extraVals = newVal.filter(val => optionvals.indexOf(val) === -1)\n      newOptions = [...options, ...extraVals.map(v => ({ text: v, value: v }))]\n    }\n    else {\n      newVal = value || ''\n      newOptions = options\n    }\n\n    return {\n      ...otherProps,\n      multiple,\n      options: newOptions,\n      value: newVal\n    }\n  })\n)(DropDownQuestion)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { compose, branch, renderComponent } from 'recompose'\nimport { DateInput, TimeInput, DateTimeInput, DatesRangeInput } from 'semantic-ui-calendar-react'\nimport { Form, Header, Segment, Item } from 'semantic-ui-react'\n\nconst withFormWrapper = WrappedComponent => {\n  const InnerComponent = ({ selectorType, present, formGuid, title, value, setNote, setValue, ...props }) => (\n    <Segment basic className='BDAFormField'>\n      <Header as='h3'>{title}</Header>\n      <Form.Field>\n        <WrappedComponent\n          {...props}\n          value={value || ''}\n          onChange={(e, { value }) => setValue(value)} />\n      </Form.Field>\n    </Segment>\n  )\n  InnerComponent.displayName = `/components/DatePicker`\n  InnerComponent.propTypes = {\n    name: PropTypes.string,\n    title: PropTypes.string,\n    value: PropTypes.string,\n    placeholder: PropTypes.string,\n\n    iconPosition: PropTypes.string,\n    popupPosition: PropTypes.string,\n    closable: PropTypes.bool,\n    valueSet: PropTypes.func\n  }\n  InnerComponent.defaultProps = {\n    name: 'DATEPICKER',\n    iconPosition: 'left',\n    popupPosition: 'bottom left',\n    closable: true,\n    value: ''\n  }\n  return InnerComponent\n}\n\nconst Present = ({ title, value }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{title}</Item.Header>\n      <Item.Description>\n        {value || <h4 style={{ color: 'red' }}>Not Entered</h4>}\n      </Item.Description>\n    </Item.Content>\n  </Item>\n)\nPresent.propTypes = DateInput.propTypes\n\nexport const DatePicker = compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  withFormWrapper\n)(DateInput)\nexport const DateTimePicker = compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  withFormWrapper\n)(DateTimeInput)\nexport const TimePicker = compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  withFormWrapper\n)(TimeInput)\nexport const DateRangePicker = compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  withFormWrapper\n)(DatesRangeInput)\n","import RadioQuestion from '../questions/RadioQuestion'\nimport TextField from '../questions/TextField'\nimport DropDownQuestion from '../questions/DropDownQuestion'\nimport { DateTimePicker } from '../questions/DatePicker'\nimport Photos from '../questions/Photos'\n\n// Design Info\nexport default {\n  title: 'Design Info',\n  description: 'Tell us something about your design',\n  fields: [\n    {\n      component: TextField,\n      name: 'designerName',\n      label: 'Designer Name(s):',\n      placeholder: 'Susan Andersen'\n    },\n    {\n      component: TextField,\n      name: 'structureID',\n      label: 'Structure ID:',\n      placeholder: 'COMPLEX_323123 ... 1233'\n    },\n    {\n      component: Photos,\n      name: 'addPhotos',\n      label: 'Add Photos:'\n    },\n    {\n      component: DateTimePicker,\n      name: 'observationDate',\n      title: 'Observation Date:'\n    },\n    {\n      component: TextField,\n      name: 'designVideo',\n      label: 'Design Video:',\n      type: 'url',\n      placeholder: 'https://youtu.be/SB-qEYVdvXA'\n    },\n    {\n      component: DropDownQuestion,\n      name: 'designFlowCondition',\n      title: 'Design Flow Conditions',\n      fluid: true,\n      selection: true,\n      options: [\n        { text: 'Baseflow', value: 'BASEFLOW' },\n        { text: 'Spring runoff', value: 'SPRING_RUNOFF' },\n        { text: 'Flood', value: 'FLOOD' },\n        { text: 'Post Flood', value: 'POST_FLOOW' }\n      ]\n    },\n    {\n      component: RadioQuestion,\n      name: 'designType',\n      title: 'Design Type',\n      options: [\n        { label: 'Beaver Dam Analogue', value: 'BDA' },\n        { label: 'Post Assisted Log Structure', value: 'PALS' },\n        { label: 'Unanchored/Pinned Wood Addition', value: 'UNANCHORED_WOOD' }\n      ]\n    }\n  ]\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Segment, Input, Header, Item } from 'semantic-ui-react'\nimport Note from './Note'\nimport { compose, branch, renderComponent } from 'recompose'\n\nconst Photos = ({ label, notePrompt, note, value, hasNote, setNote }) => (\n  <Segment basic className='BDAFormField'>\n    <Header as='h3'>{label}</Header>\n    <Input type='file' accept='image/*' fluid multiple color='red' />\n    {!hasNote ? null\n      : <Note\n        label={notePrompt}\n        value={note}\n        setValue={setNote}\n        modalTitle={`${label}: ${notePrompt}`}\n      />}\n  </Segment>\n)\n\nconst Present = ({ label, value }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{label}</Item.Header>\n      <Item.Description>\n        {value || <h4 style={{ color: 'red' }}>Not Entered</h4>}\n      </Item.Description>\n    </Item.Content>\n  </Item>\n)\nPresent.propTypes = Photos.propTypes\n\nPhotos.propTypes = {\n  label: PropTypes.string,\n  multiple: PropTypes.bool,\n  placeholder: PropTypes.object, // This is for design only\n  options: PropTypes.array,\n  value: PropTypes.any,\n  setValue: PropTypes.func,\n\n  // Now the note stuff\n  note: PropTypes.string,\n  notePrompt: PropTypes.string,\n  hasNote: PropTypes.bool,\n  setNote: PropTypes.func\n}\n\nexport default compose(\n  branch(({ present }) => !!present, renderComponent(Present))\n)(Photos)\n","import Satellite from './Satellite.json'\nimport BasicMap from './BasicMap.json'\nimport TopoMap from './TopoMap.json'\n\nexport default [\n  {\n    toolTip: 'TopoMap',\n    icon: 'image',\n    color: 'blue',\n    style: TopoMap\n  },\n  {\n    toolTip: 'Aerial',\n    icon: 'plane',\n    color: 'green',\n    style: Satellite\n  },\n  {\n    toolTip: 'RoadMap',\n    icon: 'road',\n    color: 'blue',\n    style: BasicMap\n  }\n]\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactMapGL, { Marker } from 'react-map-gl'\nimport { AutoSizer } from 'react-virtualized'\nimport mapStyles from '../../common/maps/styles'\nimport { Segment, Header, Dimmer, Loader, Message, Icon, Grid, Input, Item } from 'semantic-ui-react'\nimport { compose, withStateHandlers, branch, renderComponent } from 'recompose'\n// import mapStyle from './LocationPicker.style.json'\nimport 'mapbox-gl/dist/mapbox-gl.css'\n\nconst LocationPicker = ({ title, loading, message, error, viewport, mapboxApiAccessToken, onViewportChange }) => {\n  let icon = <Icon name='circle notched' loading />\n  if (!loading) icon = <Icon name={error ? 'check times' : 'check circle'} />\n  // console.log('RENDER', viewport)\n  return (\n    <Segment className='BDAFormField'>\n      <Header as='h3'>{title}</Header>\n      <Grid columns={2}>\n        <Grid.Row>\n          <Grid.Column>\n            <Input fluid label='Lat:' placeholder='49.29949' value={viewport.latitude} />\n          </Grid.Column>\n          <Grid.Column>\n            <Input fluid label='Lng:' placeholder='-123.34234' value={viewport.longitude} />\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n      <div style={{ height: 400 }}>\n        <Dimmer active={loading}>\n          <Loader />\n        </Dimmer>\n        <AutoSizer>\n          {({ height, width }) => loading ? null : (\n            <ReactMapGL\n              {...viewport}\n              height={height}\n              width={width}\n              mapStyle={mapStyles[1].style}\n              onViewportChange={onViewportChange}\n              mapboxApiAccessToken={mapboxApiAccessToken} >\n              <Marker key={`marker-1`}\n                longitude={viewport.longitude}\n                latitude={viewport.latitude}\n                offsetLeft={-20} offsetTop={-10}\n              >\n                <Icon style={{ color: '#FFFFFF', textShadow: '0px 0px 2px #000000' }}\n                  name='map marker alternate'\n                  size='huge' />\n              </Marker>\n            </ReactMapGL>\n          )\n          }\n        </AutoSizer>\n      </div>\n      <Message positive={!loading && !error} negative={error} icon>\n        {icon}\n        <Message.Content>\n          <p>{error || message}</p>\n        </Message.Content>\n      </Message>\n\n    </Segment>\n  )\n}\n\nLocationPicker.propTypes = {\n  title: PropTypes.string,\n  viewport: PropTypes.object,\n  mapboxApiAccessToken: PropTypes.string,\n  onViewportChange: PropTypes.func,\n  loading: PropTypes.bool,\n  error: PropTypes.string,\n  message: PropTypes.string\n}\nLocationPicker.defaultProps = {\n  onViewportChange: () => console.log('onViewportChange NOT SET')\n}\n\nconst withGeolocation = (WrappedComponent) =>\n  class Geolocation extends React.Component {\n    state = {\n      loading: true,\n      message: 'Retrieving location data...'\n    }\n    static propTypes = {\n      viewport: PropTypes.object,\n      onViewportChange: PropTypes.func\n    }\n\n    async componentWillMount () {\n      const geolocation = navigator.geolocation\n      const location = await new Promise(resolve => {\n        if (!geolocation) {\n          resolve({\n            state: {\n              error: 'Not Supported'\n            }\n          })\n        }\n\n        geolocation.getCurrentPosition(\n          ({ coords: { latitude, longitude } }) => {\n            resolve({\n              viewport: Object.assign({}, this.props.viewport, {\n                latitude,\n                longitude\n              }),\n              state: {\n                loading: false,\n                message: 'Retrieved Location Data'\n              }\n            })\n          },\n          () => {\n            resolve({\n              state: {\n                loading: false,\n                error: 'Error retrieving location data from device.'\n              }\n            })\n          })\n      })\n      if (location.viewport) this.props.onViewportChange(location.viewport)\n      this.setState(location.state)\n    }\n\n    render () {\n      return <WrappedComponent {...this.props} {...this.state} />\n    }\n  }\n\nconst Present = ({ title, value }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{title || 'Geolocation'}</Item.Header>\n      <Item.Description>\n        <pre><code>{JSON.stringify(value, null, 2)}</code></pre>\n      </Item.Description>\n    </Item.Content>\n  </Item>\n)\n\nPresent.propTypes = LocationPicker.propTypes\n\nexport default compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  withStateHandlers(\n    ({ value }) => ({\n      viewport: value || {\n        latitude: 49.29949,\n        longitude: -123.1528795,\n        zoom: 17\n      }\n    }),\n    {\n      onViewportChange: (state, { setValue }) => newVal => {\n        setValue(newVal)\n        return { viewport: newVal }\n      }\n    }),\n  withGeolocation\n)(LocationPicker)\n","/**\n * NOTE: This gets checked into Git. Nothing secret should go here\n */\nexport const AuthStates = {\n  unknown: 'unknown', // This is the initial state\n  unauthenticated: 'unauthenticated',\n  signingOut: 'signingOut',\n  signedOut: 'signedOut',\n  signingIn: 'signingIn',\n  signedIn: 'signedIn',\n  mfaRequired: 'mfaRequired',\n  newPasswordRequired: 'newPasswordRequired'\n}\n\n// Need to supply a mapbox token (it's not secret. Putting it in git is fine)\nexport const mapBoxToken = process.env.REACT_APP_MAPBOX_TOKEN\n\nlet domain = process.env.REACT_APP_DOMAIN\nlet path = process.env.REACT_APP_COOKIEPATH\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n  domain = 'localhost'\n  path = null\n}\n\nexport default {\n  env: process.env.NODE_ENV,\n  GraphQLEndpoint: process.env.REACT_APP_GRAPHQL,\n  // Cognito stuff\n  Auth: {\n    // REQUIRED only for Federated Authentication - Amazon Cognito Identity Pool ID\n    // identityPoolId: 'XX-XXXX-X:XXXXXXXX-XXXX-1234-abcd-1234567890ab',\n\n    // REQUIRED - Amazon Cognito Region\n    region: process.env.REACT_APP_AWS_REGION,\n\n    // OPTIONAL - Amazon Cognito Federated Identity Pool Region\n    // Required only if it's different from Amazon Cognito Region\n    // identityPoolRegion: 'XX-XXXX-X',\n\n    // OPTIONAL - Amazon Cognito User Pool ID\n    userPoolId: process.env.REACT_APP_USER_POOL_ID,\n\n    // OPTIONAL - Amazon Cognito Web Client ID (26-char alphanumeric string)\n    userPoolWebClientId: process.env.REACT_APP_COGNITO_CLIENT,\n\n    // OPTIONAL - Enforce user authentication prior to accessing AWS resources or not\n    mandatorySignIn: true,\n\n    // OPTIONAL - Configuration for cookie storage\n    cookieStorage: {\n      // REQUIRED - Cookie domain (only required if cookieStorage is provided)\n      domain: `${domain}`,\n      // OPTIONAL - Cookie path\n      path: path,\n      // OPTIONAL - Cookie expiration in days\n      expires: 20,\n      // OPTIONAL - Cookie secure flag (requires HTTPS)\n      secure: true\n    }\n\n    // OPTIONAL - customized storage object\n    // storage: new MyStorage(),\n\n    // OPTIONAL - Manually set the authentication flow type. Default is 'USER_SRP_AUTH'\n    // authenticationFlowType: 'USER_PASSWORD_AUTH'\n  }\n}\n","import RadioQuestion from '../questions/RadioQuestion'\nimport TextField from '../questions/TextField'\n\nimport LocationPicker from '../questions/LocationPicker'\nimport { mapBoxToken } from '../../../config'\n\nexport default {\n  title: 'Positional Attributes',\n  description: 'The position of your structure',\n  fields: [\n    {\n      component: LocationPicker,\n      name: 'location',\n      mapboxApiAccessToken: mapBoxToken\n    },\n    {\n      component: RadioQuestion,\n      name: 'structureChannelLocation',\n      title: 'Structure Location Relative to Channel(s)',\n      options: [\n        { label: 'On Main Channel', value: 'MAIN_CHANNEL' },\n        { label: 'On Right Side Channel(s)', value: 'RIGHT_SIDE_CHANNEL' },\n        { label: 'On Left Side Channel(s)', value: 'LEFT_SIDE_CHANNEL' },\n        { label: 'On Right Floodplain', value: 'FLOODPLAIN_L' },\n        { label: 'On Left Floodplain', value: 'FLOODPLAIN_R' }\n      ]\n    },\n    {\n      component: TextField,\n      name: 'complex',\n      label: 'Complex:',\n      placeholder: 'COMPLEX_323123 ... 1233'\n    },\n    {\n      component: RadioQuestion,\n      name: 'complexExtended',\n      options: [\n        { label: 'Part of new dam complex', value: 'NEW_DAM_COMPLEX' },\n        { label: 'Expansion of existing dam complex', value: 'EXPANSION' },\n        { label: 'NA - Isolated Dam', value: 'NA_ISOLATED_DAM' },\n        { label: 'NA - Non-Dam', value: 'NA_NON_DAM' }\n      ]\n    }\n  ]\n}\n","\nimport CardListPicker from '../questions/CardListPicker'\n\nexport default {\n  title: 'Existing Features',\n  description: 'are there any existing features?',\n\n  fields: [\n    // ExistingFeatures\n    {\n      component: CardListPicker,\n      title: 'Expected Geomorphic Units at Structure Location',\n      name: 'expectedUnits',\n      hasNote: true,\n      allowMultiple: true,\n      options: [\n        { image: './images/gut/planar_plane.png', value: 'Planar', text: 'Planar' },\n        { image: './images/gut/convexity_mound.png', value: 'Convexity', text: 'Convexity (bar)' },\n        { image: './images/gut/convexity_saddle.png', value: 'Saddle', text: 'Saddle (riffle)' },\n        { image: './images/gut/concavity_bowl.png', value: 'Concavity', text: 'Concavity (true pool)' },\n        { image: './images/gut/concavity_trough.png', value: 'Trough', text: 'Trough (shallow thalweg or chute)' },\n        { image: './images/gut/planar_wall.png', value: 'WallEdge', text: 'Wall: Bank' },\n        { image: './images/gut/planar_wall.png', value: 'WallBank', text: 'Wall: Edge' }\n      ]\n    },\n    {\n      component: CardListPicker,\n      title: 'Structural Elements at Structure Location',\n      name: 'elementsAtLocation',\n      hasNote: true,\n      allowMultiple: true,\n      options: [\n        {\n          image: 'https://placekitten.com/200/200',\n          value: `Roots`,\n          text: `Roots`,\n          subText: `some explanation`\n        },\n        {\n          image: 'https://placekitten.com/200/201',\n          value: `Live Trees/Shrubs`,\n          text: `Live Trees/Shrubs`,\n          subText: `some explanation`\n        },\n        {\n          image: 'https://placekitten.com/201/200',\n          value: `Aquatic Vegetation`,\n          text: `Aquatic Vegetation`,\n          subText: `some explanation`\n        },\n        {\n          image: 'https://placekitten.com/200/202',\n          value: `Boulder(s)`,\n          text: `Boulder(s)`,\n          subText: `some explanation`\n        },\n        {\n          image: 'https://placekitten.com/202/200',\n          value: `Woody Debris`,\n          text: `Woody Debris`,\n          subText: `some explanation`\n        },\n        {\n          image: 'https://placekitten.com/200/203',\n          value: `Wall: Bank`,\n          text: `Wall: Bank`,\n          subText: `some explanation`\n        },\n        {\n          image: 'https://placekitten.com/203/200',\n          value: `Wall: Bar Edge`,\n          text: `Wall: Bar Edge`,\n          subText: `some explanation`\n        }\n      ]\n    }\n  ]\n}\n","import RadioQuestion from '../questions/RadioQuestion'\nimport TextField from '../questions/TextField'\nimport DropDownQuestion from '../questions/DropDownQuestion'\n\n// mostly just for debugging\nexport default {\n  title: 'Structure Design',\n  description: 'The structure of your design',\n  fields: [\n    {\n      component: RadioQuestion,\n      title: 'Structure Position',\n      name: 'structurePosition',\n      options: [\n        { label: 'River Right Margin Attached', value: 'RIVER_RIGHT_MARGIN_ATTACHED' },\n        { label: 'River Left Margin Attached', value: 'RIVER_LEFT_MARGIN_ATTACHED' },\n        { label: 'Channel Spanning (i.e. BDA or Debris Jam)', value: 'SPANNING' },\n        { label: 'Mid Channel', value: 'MID_CHANNEL' }\n      ]\n    },\n    {\n      component: RadioQuestion,\n      title: 'Structure Orientation',\n      name: 'structureOrientation',\n      options: [\n        { label: 'Perpendicular to Flow', value: 'PERPENDICULAR' },\n        { label: 'Angled Flow Downstream', value: 'ANGLED_DOWN' },\n        { label: 'Angled Flow Upstream', value: 'ANGLED_UP' },\n        { label: 'Diamond', value: 'DIAMOND' },\n        { label: 'Triangle Pointing Upstream', value: 'TRIANGLE_UP' },\n        { label: 'Triangle Pointing DownStrream', value: 'TRIANGLE_DOWN' }\n      ]\n    },\n    {\n      component: RadioQuestion,\n      title: 'Channel Constriction (% of Bankfull Width)',\n      name: 'channelConstriction',\n      options: [\n        { label: '100% BFW', value: '100' },\n        { label: '95-99%', value: '95T99' },\n        { label: '85-95%', value: '85T95' },\n        { label: '75-85%', value: '75T85' },\n        { label: '50-75%', value: '50T75' },\n        { label: '< 25%', value: 'LT25' }\n      ]\n    },\n    {\n      component: TextField,\n      name: 'numPosts',\n      label: 'Number of Posts',\n      placeholder: '1,2,3',\n      type: 'number'\n    },\n    {\n      component: DropDownQuestion,\n      title: 'Structure Materials',\n      name: 'structureMaterials',\n      fluid: true,\n      multiple: true,\n      search: true,\n      selection: true,\n      allowAdditions: true,\n      placeholder: 'Choose all that apply...',\n      options: [\n        { text: 'Willow Weave', value: 'Willow Weave' },\n        { text: 'Key piece (completely limbed)', value: 'Key piece (completely limbed)' },\n        { text: 'Key piece (limbed on bottom side only)', value: 'Key piece (limbed on bottom side only)' },\n        { text: 'Root wad', value: 'Root wad' },\n        { text: 'Small Woody Debris', value: 'Small Woody Debris' },\n        { text: 'Woody branches (single limbed) > 15cm diameter', value: 'Woody branches (single limbed) > 15cm diameter' },\n        { text: 'Woody branches (single limbed) < 15cm diameter', value: 'Woody branches (single limbed) < 15cm diameter' },\n        { text: 'Mud', value: 'Mud' },\n        { text: 'Grass / Reeds', value: 'Grass / Reeds' },\n        { text: 'Other organic', value: 'Other organic' },\n        { text: 'Cobble or Boulders', value: 'Cobble or Boulders' },\n        { text: '203 Guy Woddy Debris', value: '203 Guy Woddy Debris' },\n        { text: 'Turf', value: 'Turf' },\n        { text: 'Dowelled or Twine tied Simple Logs', value: 'Dowelled or Twine tied Simple Logs' }\n      ]\n    },\n    {\n      component: RadioQuestion,\n      name: 'materialSources',\n      options: [\n        { label: 'Material Sourced on site', value: 'ONSITE' },\n        { label: 'Materials Imported', value: 'IMPORTED' }\n      ]\n    },\n    {\n      component: TextField,\n      name: 'maxStrucHeight',\n      label: 'Max dam/structure height (m) 0.1m',\n      placeholder: '2.4',\n      type: 'text'\n    },\n    {\n      component: TextField,\n      name: 'maxPondDepth',\n      label: 'Max pond depth (m if applicable) 0.1m',\n      placeholder: '2.4',\n      type: 'text'\n    },\n    {\n      component: TextField,\n      name: 'waterSurfDiff',\n      label: 'Water surface difference (m if applicable) 0.1m',\n      placeholder: '2.4',\n      type: 'text'\n    },\n    {\n      component: TextField,\n      name: 'structLength',\n      label: 'Structure Length (m) 1.0m',\n      placeholder: '3.0',\n      type: 'text'\n    }\n\n  ]\n\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst Track = ({ trackNum, step, source, target, getTrackProps }) => {\n  const classes = ['sliderTrack']\n  const dynamicStyle = {\n    left: `${source.percent}%`,\n    width: `${target.percent - source.percent}%`\n  }\n  if (trackNum === 2) {\n    classes.push('limiter')\n    // console.log('YOWZA', target.percent, source.percent)\n    if (target.percent < 100 + step) {\n      dynamicStyle.left = `${source.percent - step}%`\n      dynamicStyle.width = `${target.percent - source.percent + step}%`\n    }\n  }\n  else if (trackNum === 0) {\n    classes.push('progress')\n  }\n\n  return (\n    <div className={classes.join(' ')} style={dynamicStyle}\n      // {...getTrackProps()}\n    />\n  )\n}\n\nTrack.propTypes = {\n  trackNum: PropTypes.number,\n  step: PropTypes.number,\n  source: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    value: PropTypes.number.isRequired,\n    percent: PropTypes.number.isRequired\n  }).isRequired,\n  target: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    value: PropTypes.number.isRequired,\n    percent: PropTypes.number.isRequired\n  }).isRequired,\n  getTrackProps: PropTypes.func.isRequired\n}\n\nexport default Track\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n// *******************************************************\n// TICK COMPONENT\n// *******************************************************\nconst Tick = ({ tick, count, format }) => (\n  <div>\n    <div className='sliderTick' style={{ left: `${tick.percent}%` }} />\n    <div className='sliderTickNum'\n      style={{\n        marginLeft: `${-(100 / count) / 2}%`,\n        width: `${100 / count}%`,\n        left: `${tick.percent}%`\n      }} >\n      {format(tick.value)}\n    </div>\n  </div>\n)\n\nTick.propTypes = {\n  tick: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    value: PropTypes.number.isRequired,\n    percent: PropTypes.number.isRequired\n  }).isRequired,\n  count: PropTypes.number.isRequired,\n  format: PropTypes.func.isRequired\n}\n\nTick.defaultProps = {\n  format: d => d\n}\n\nexport default Tick\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n// *******************************************************\n// HANDLE COMPONENT\n// *******************************************************\nconst Handle = ({\n  disabled,\n  domain: [min, max],\n  handle: { id, value, percent },\n  getHandleProps\n}) => (\n  <div className={`sliderHandle${disabled ? ' disabled' : ''}`}\n    role='slider'\n    aria-valuemin={min}\n    aria-valuemax={max}\n    aria-valuenow={value}\n    style={{\n      left: `${percent}%`\n    }}\n    {...getHandleProps(id)}\n    onMouseDown={disabled ? null : getHandleProps(id).onMouseDown}\n    onTouchStart={disabled ? null : getHandleProps(id).onTouchStart}\n  />\n)\n\nHandle.propTypes = {\n  disabled: PropTypes.bool,\n  domain: PropTypes.array.isRequired,\n  handle: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    value: PropTypes.number.isRequired,\n    percent: PropTypes.number.isRequired\n  }).isRequired,\n  getHandleProps: PropTypes.func.isRequired\n}\n\nexport default Handle\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\nimport { Segment, Header, Item } from 'semantic-ui-react'\nimport { Slider, Rail, Handles, Tracks, Ticks } from 'react-compound-slider'\nimport { compose, withStateHandlers, branch, renderComponent } from 'recompose'\nimport Track from './Track'\nimport Tick from './Tick'\nimport Handle from './Handle'\nimport './PercentSlider.css'\n\nconst STEP = 5\n\nconst PercentSliders = ({ title, mustAddUp, options, onUpdate, onChange, sliderValues }) => (\n  <div className='BDAFormField'>\n    <Header as='h3'>{title}</Header>\n    <Segment basic>\n      {mustAddUp ? <p><em>(Must add to 100%)</em></p> : null}\n      {options.map(({ label, name }, idx) => (\n        <CustomSlider\n          name={name}\n          label={label}\n          onUpdate={(values) => onUpdate({ name, values })}\n          // onChange={(values) => onUpdate({  })}\n          key={idx}\n          step={STEP}\n          domain={[0, 100 + STEP]}\n          value={sliderValues[name] ? sliderValues[name] : [0, 100 + STEP]} />\n      ))}\n    </Segment>\n  </div>\n)\n\nconst sliderStyle = {\n  position: 'relative',\n  width: '100%'\n}\n\nPercentSliders.propTypes = {\n  title: PropTypes.string,\n  mustAddUp: PropTypes.bool,\n  options: PropTypes.arrayOf(PropTypes.object),\n  onUpdate: PropTypes.func,\n  onChange: PropTypes.func,\n  sliderValues: PropTypes.object\n}\n\nconst CustomSlider = ({ label, name, step, domain, value, onUpdate, onChange }) => (\n  <Slider className='sliderWrapper'\n    step={step}\n    mode={2}\n    domain={domain}\n    rootStyle={sliderStyle}\n    onUpdate={onUpdate}\n    onChange={onChange}\n    values={value} >\n    <Rail>\n      {({ getRailProps }) => (\n        <div className='sliderRail' {...getRailProps()}>\n          <Header as='h4'>{`${label}: ${value[0]}%`}</Header>\n        </div>\n      )}\n    </Rail>\n    <Handles>\n      {({ handles, getHandleProps }) => (\n        <div className='slider-handles'>\n          {handles.map((handle, idx) => (\n            <Handle\n              disabled={idx !== 0}\n              key={handle.id}\n              handle={handle}\n              domain={domain}\n              getHandleProps={getHandleProps}\n            />\n          ))}\n        </div>\n      )}\n    </Handles>\n    <Tracks>\n      {({ tracks, getTrackProps }) => (\n        <div className='slider-tracks'>\n          {tracks.map(({ id, source, target }, idx) => (\n            <Track\n              key={id}\n              trackNum={idx}\n              step={step}\n              source={source}\n              target={target}\n              getTrackProps={getTrackProps}\n            />\n          ))}\n        </div>\n      )}\n    </Tracks>\n    <Ticks values={tickVals}>\n      {({ ticks }) => (\n        <div className='slider-ticks'>\n          {ticks.map(tick => (\n            <Tick key={tick.id} tick={tick} count={ticks.length} />\n          ))}\n        </div>\n      )}\n    </Ticks>\n  </Slider>\n)\n\nCustomSlider.propTypes = {\n  label: PropTypes.string,\n  name: PropTypes.string,\n  step: PropTypes.number,\n  domain: PropTypes.arrayOf(PropTypes.number),\n  value: PropTypes.arrayOf(PropTypes.number)\n}\n\nconst tickVals = [ 10, 20, 30, 40, 50, 60, 70, 80, 90, 100 ]\n\n/**\n * This is where the meat of the function lives\n * @param {*} param0\n */\nconst handleValues = ({ sliderValues }, { setValue }) => ({ name, values }) => {\n  // Add everything together and figure out how much we have left\n  const max = Object.keys(sliderValues).map(slKey => sliderValues[slKey][0]).reduce((acc, x) => (acc + x), 0)\n  const newLevel = 100 - max + STEP\n\n  const maxNotThis = Object.keys(sliderValues).filter(x => x !== name).map(slKey => sliderValues[slKey][0]).reduce((acc, x) => (acc + x), 0)\n  const newLimiterThis = 100 - maxNotThis + STEP\n\n  const newSliderValues = _.cloneDeep(sliderValues)\n\n  if (!newSliderValues[name]) newSliderValues[name] = values\n\n  Object.keys(newSliderValues).forEach(objKey => {\n    if (name !== objKey) {\n      if (newLevel > newSliderValues[objKey][0] + STEP) newSliderValues[objKey][1] = newLevel\n      else {\n        newSliderValues[objKey][1] = newSliderValues[objKey][0] + STEP\n      }\n    }\n    else if (name === objKey) {\n      newSliderValues[objKey] = [values[0], newLimiterThis]\n    }\n    // if (objKey === 'OVER_TOP') console.log('WEIRD:', newSliderValues[objKey], newLevel)\n  })\n  // console.log('PROPS', name, values, newSliderValues[name])\n  setValue(Object.keys(newSliderValues).reduce((acc, key) => {\n    acc[key] = newSliderValues[key][0]\n    return acc\n  }, {}))\n  return { sliderValues: newSliderValues }\n}\n\nconst Present = ({ title, value }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{title}</Item.Header>\n      <Item.Description>\n        <pre><code>{JSON.stringify(value, null, 2)}</code></pre>\n      </Item.Description>\n    </Item.Content>\n  </Item>\n)\n\nPresent.propTypes = PercentSliders.propTypes\n\nexport default compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  withStateHandlers(\n    ({ options }) => ({\n      sliderValues: options.reduce((acc, val) => {\n        acc[val.name] = [0, 100 + STEP]\n        return acc\n      }, {})\n    }),\n    {\n      onUpdate: handleValues\n      // onChange: () => ({ values, name }) => ({ values: Object.assign({}, values, { [name]: values }) })\n    }\n  )\n)(PercentSliders)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, Checkbox, Header, Segment, Item } from 'semantic-ui-react'\nimport Note from './Note'\nimport { compose, withStateHandlers, renderComponent, branch, pure } from 'recompose'\n\nconst CheckboxQuestion = ({ title, options, hasNote, note, notePrompt, setNote, setValue }) => (\n  <Segment basic className='BDAFormField'>\n    <Header as='h3'>{title}</Header>\n    {options.map(({ label, value }, idx) => (\n      <Form.Field key={idx}>\n        <Checkbox\n          label={label}\n          value={value}\n          onChange={() => setValue(value)}\n        />\n      </Form.Field>\n    ))}\n    {!hasNote ? null\n      : <Note\n        label={notePrompt}\n        value={note}\n        setValue={setNote}\n        modalTitle={`${title}: ${notePrompt}`}\n      />}\n  </Segment>\n)\n\nCheckboxQuestion.propTypes = {\n  title: PropTypes.string,\n  options: PropTypes.arrayOf(PropTypes.object),\n  // Now the note stuff\n  note: PropTypes.string,\n  notePrompt: PropTypes.string,\n  hasNote: PropTypes.bool,\n  setNote: PropTypes.func,\n\n  setValue: PropTypes.func\n}\n\nconst Present = ({ title, value, options, note }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{title}</Item.Header>\n      <Item.Description>\n        {value && Array.isArray(value) && value.length > 0\n          ? printValues(value, options)\n          : <h4 style={{ color: 'red' }}>Not Entered</h4>}\n      </Item.Description>\n      {note ? <Item.Extra>Note: <em>{note}</em></Item.Extra> : null }\n    </Item.Content>\n  </Item>\n)\nfunction printValues (value, options) {\n  return (\n    <ul>\n      {value.map((val, idx) => (<li key={`item-${idx}`}>{options.find(op => op.value === val).label}</li>)) }\n    </ul>\n  )\n}\n\nPresent.propTypes = CheckboxQuestion.propTypes\n\nexport default compose(\n  branch(({ present }) => !!present, renderComponent(Present)),\n  // Wrap setvalue because it can be multiples\n  withStateHandlers(\n    ({ value }) => ({ controlledValues: value }),\n    {\n      setValue: ({ controlledValues }, { setValue }) => (newVal) => {\n        let newValues = []\n        if (Array.isArray(controlledValues)) newValues = controlledValues.slice(0)\n\n        if (newValues.indexOf(newVal) < 0) newValues.push(newVal)\n        else newValues = newValues.splice(newValues.indexOf(newVal), 1)\n\n        if (setValue) setValue(newValues)\n        return { controlledValues: newValues }\n      }\n    }\n  )\n)(CheckboxQuestion)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Segment, Button, Header, Item } from 'semantic-ui-react'\nimport { compose, withHandlers, mapProps, branch, renderComponent } from 'recompose'\nimport './FloodBehavior.css'\n\nconst GRADIENT = [\n  'green',\n  'yellow',\n  'orange',\n  'red'\n]\n\nconst FloodBehavior = ({ label, value: { location: loc, behavior }, setLoc, setBehavior }) => (\n  <Segment basic className='floodBehavior  BDAFormField'>\n    <Header as='h3'>{label}</Header>\n    <Button.Group fluid toggle className={'behave ' + (behavior && behavior.length > 0 ? 'set' : '')}>\n      {['Intact', 'Minor', 'Major', 'Blowout'].map((bText, idx) => (\n        <Button\n          key={`behav${idx}`}\n          onClick={() => {\n            if (bText === 'Intact' || bText === 'Blowout') setLoc([])\n            setBehavior(bText)\n          }\n          }\n          active={behavior && behavior === bText}\n          color={GRADIENT[idx]}>\n          {bText}\n        </Button>\n      ))}\n    </Button.Group>\n    {\n      !behavior || behavior === 'Intact' || behavior === 'Blowout' ? null\n        : <LocationGroup loc={loc} behavior={behavior} setLoc={setLoc} />\n\n    }\n  </Segment>\n)\n\nFloodBehavior.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.shape({\n    loc: PropTypes.array,\n    behavior: PropTypes.string\n  }),\n  setLoc: PropTypes.func,\n  setBehavior: PropTypes.func\n}\n\nconst LocationGroup = ({ loc, setLoc }) => (\n  <div style={{ marginTop: '2em' }}>\n    <Header as='h4'>Location: (select all that apply)</Header>\n    <Button.Group fluid toggle>\n      {['Left', 'Center', 'Basal', 'Right'].map((bText, idx) => {\n        return (\n          <Button\n            key={`loca${idx}`}\n            size='large'\n            onClick={() => {\n              let newLoc = []\n              if (loc && Array.isArray(loc)) newLoc = loc.splice(0)\n              if (newLoc.indexOf(bText) === -1) newLoc.push(bText)\n              else newLoc.splice(newLoc.indexOf(bText), 1)\n              setLoc(newLoc)\n            }}\n            active={loc && loc.indexOf(bText) > -1}>\n            {bText}\n          </Button>\n        )\n      })}\n    </Button.Group>\n  </div>\n)\n\nLocationGroup.propTypes = {\n  loc: PropTypes.array,\n  setLoc: PropTypes.func\n}\n\nconst Present = ({ label, value: { location: loc, behavior } }) => (\n  <Item>\n    <Item.Content>\n      <Item.Header as='h4'>{label}</Item.Header>\n      <Item.Description>\n        <ul>\n          <li>{behavior || <h4 style={{ color: 'red' }}>Behavior Not Entered</h4>}</li>\n          {\n            !behavior || behavior === 'Intact' || behavior === 'Blowout' ? null\n              : <li>{loc ? loc.join(', ') : <h4 style={{ color: 'red' }}>Location Not Entered</h4>}</li>\n          }\n        </ul>\n      </Item.Description>\n    </Item.Content>\n  </Item>\n)\n\nPresent.propTypes = FloodBehavior.propTypes\n\nexport default compose(\n  // Wrap setvalue because it can be multiples\n  withHandlers({\n    setLoc: ({ value, setValue }) => (newVal) => {\n      if (!value) setValue({ behavior: null, location: newVal })\n      else setValue({ ...value, location: newVal })\n    },\n    setBehavior: ({ value, setValue }) => (newVal) => {\n      if (!value) setValue({ behavior: newVal, location: null })\n      else setValue({ ...value, behavior: newVal })\n    }\n  }),\n  mapProps((props) => ({\n    ...props,\n    value: props.value ? props.value : { behavior: null, location: null }\n  })),\n  branch(({ present }) => !!present, renderComponent(Present))\n)(FloodBehavior)\n","import geomorphicResponse from './geomorphicResponse'\nimport designInfo from './designInfo'\nimport positionalAttrib from './positionalAttrib'\nimport existingFeatures from './existingFeatures'\nimport structureDesign from './structureDesign'\nimport hydraulicResponse from './hydraulicResponse'\n\nexport default [\n  designInfo,\n  positionalAttrib,\n  structureDesign,\n  existingFeatures,\n  hydraulicResponse,\n  geomorphicResponse\n]\n","\nimport RadioQuestion from '../questions/RadioQuestion'\nimport PercentSliders from '../questions/PercentSliders/PercentSliders'\nimport Checkboxes from '../questions/Checkboxes'\nimport FloodBehavior from '../questions/FloodBehavior'\n\nexport default {\n  title: 'Anticipated Hydraulic Response',\n  description: 'What do you expect to happen?',\n  fields: [\n    // HydraulicResponses\n    {\n      component: PercentSliders,\n      title: 'Channel Spanners:',\n      mustAddUp: true,\n      name: 'channelSpanners',\n      options: [\n        { label: 'Flow Over Top', name: 'OVER_TOP' },\n        { label: 'Basal Flow', name: 'BASAL' },\n        { label: 'Throughflow', name: 'THROUGHFLOW' },\n        { label: 'Flow Around Left', name: 'AROUND_LEFT' },\n        { label: 'Flow Around Right', name: 'AROUND_RIGHT' }\n      ]\n    },\n    {\n      component: PercentSliders,\n      title: 'Non-Channel Spanners:',\n      mustAddUp: true,\n      name: 'nonChannelSpanners',\n      options: [\n        { label: 'Shunted Flow Left', name: 'SHUNT_LEFT' },\n        { label: 'Shunted Flow Right', name: 'SHUNT_RIGHT' },\n        { label: 'Flow Through (sieve)', name: 'THROUGH' },\n        { label: 'Flow Over Top', name: 'OVER' },\n        { label: 'Flow Under Bottom', name: 'UNDER' }\n      ] },\n    {\n      component: FloodBehavior,\n      label: 'Typical Flood Behavior',\n      name: 'TypicalFlood'\n    },\n    {\n      component: FloodBehavior,\n      label: 'Big Flood Behavior',\n      name: 'BigFlood'\n\n    },\n    {\n      component: RadioQuestion,\n      title: 'Estimated Upstream Zone of Hydraulic Influence',\n      name: 'upstreamHydraulicInfluence',\n      options: [\n        { label: '< 1 BFW', value: '1' },\n        { label: '1-2 BFW', value: '1-2' },\n        { label: '2-5 BFW', value: '2-5' },\n        { label: '5-10 BFW', value: '5-10' },\n        { label: '> 10 BFW', value: '10-INF' }\n      ] },\n    {\n      component: RadioQuestion,\n      title: 'Estimated Downstream Zone of Hydraulic Influence',\n      name: 'downstreamHydraulicInfluence',\n      options: [\n        { label: '< 1 BFW', value: '1' },\n        { label: '1-2 BFW', value: '1-2' },\n        { label: '2-5 BFW', value: '2-5' },\n        { label: '5-10 BFW', value: '5-10' },\n        { label: '> 10 BFW', value: '10-INF' }\n      ]\n    },\n    {\n      component: Checkboxes,\n      title: 'Side Channel Forced',\n      name: 'sideChannelForced',\n      options: [\n        { label: 'None', value: 'None' },\n        { label: 'Single Left', value: 'Single Left' },\n        { label: 'Multiple Left', value: 'Multiple Left' },\n        { label: 'Single Right', value: 'Single Right' },\n        { label: 'Multiple Right', value: 'Multiple Right' }\n      ] },\n    {\n      component: RadioQuestion,\n      title: 'Pond Extend',\n      name: 'pondExtend',\n      options: [\n        { label: 'Contained within bankfull channel', value: 'Contained' },\n        { label: 'Expanding out onto floodplain', value: 'Expanding' },\n        { label: 'Drained', value: 'Drained' }\n      ]\n    },\n    {\n      component: Checkboxes,\n      title: 'Floodplain Inundation',\n      name: 'floodplainInundation',\n      options: [\n        { label: 'During Extreme Floods River Left', value: 'EXTREME_LEFT' },\n        { label: 'During Extreme Floods River Right', value: 'EXTREME_RIGHT' },\n        { label: 'During Seasonal Floods River Left', value: 'SEASONAL_LEFT' },\n        { label: 'During Seasonal Floods River Right', value: 'SEASONAL_RIGHT' },\n        { label: 'Year Round Inundation River Left', value: 'ALLYEAR_LEFT' },\n        { label: 'Year Round Inundation River Right', value: 'ALLYEAR_RIGHT' }\n      ]\n    }\n  ]\n\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Segment, Divider, Header } from 'semantic-ui-react'\nimport Topbar from '../Topbar'\nimport { withFormState } from '../../../redux/withRedux'\nimport withFieldData from '../../../graphql/withFieldData'\nimport { compose, branch, renderNothing } from 'recompose'\n// Import our form elements\nimport sections from '../sections'\n\n/**\n   * Same goes for the viewer\n   */\nconst StructureViewer = ({ structure, getValueProps }) => (\n  <div className='appContainer'>\n    <Topbar />\n    <Segment className='presentForm'>\n      {sections.map((item, idx) => (\n        <div className='section' key={`section-${idx}`}>\n          <Header>{item.title}</Header>\n          <div style={{ paddingLeft: '1.5rem' }}>\n            {item.fields.map(({ component: Component, name, ...props }, idx) => (\n              <Component key={`field-${idx}`} present name={name} {...props} {...getValueProps(name)} />\n            ))}\n            <Divider />\n          </div>\n        </div>\n      ))}\n    </Segment>\n  </div>\n)\n\nStructureViewer.propTypes = {\n  structure: PropTypes.object,\n  getValueProps: PropTypes.func\n}\n\nexport default compose(\n  withFormState,\n  withFieldData,\n  branch(({ structure }) => !structure, renderNothing)\n)(StructureViewer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button } from 'semantic-ui-react'\nimport { withCreateStructure } from '../../../graphql/queries'\nimport { withReduxHome } from '../../../redux/withRedux'\nimport { compose } from 'recompose'\n\nconst AddButton = ({ createStructure, editStructure }) => (\n  <Button\n    className='addButton'\n    icon='plus'\n    circular\n    color='green'\n    onClick={(e) => {\n      e.preventDefault()\n      createStructure({ body: '{}' }).then(res => {\n        try {\n          editStructure(res.data.createBDAPOC.id)\n        }\n        catch (e) { }\n      })\n      //\n    }}\n  />\n)\n\nAddButton.propTypes = {\n  createStructure: PropTypes.func,\n  editStructure: PropTypes.func\n}\n\nexport default compose(\n  withCreateStructure,\n  withReduxHome\n)(AddButton)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button } from 'semantic-ui-react'\nimport { withCreateStructure } from '../../../graphql/queries'\n\nconst RefreshStockButton = ({ createStructure }) => (\n  <Button\n    className='refreshButton'\n    icon='refresh'\n    size='large'\n    content='Add Demo Records'\n    fluid\n    color='red'\n    onClick={(e) => {\n      // READ THE STOCK ENTRIES FROM A JSON FILE\n      const data = require('../views/data.json')\n      Object.values(data.structures).forEach(({ fields }) => {\n        createStructure({ body: JSON.stringify(fields) })\n      })\n      console.log('refresh', { data, createStructure })\n    }}\n  />\n)\n\nRefreshStockButton.propTypes = {\n  createStructure: PropTypes.func\n}\n\nexport default withCreateStructure(RefreshStockButton)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst Section = ({ activeStep, currStep, item, getValueProps }) => (\n  <div style={{ display: (activeStep === currStep) || (!activeStep && currStep === 0) ? '' : 'none' }}>\n    <div key={`sectionlabel-${currStep}`}>\n      {item.fields.map(({ component: FieldComponent, name, ...props }, idx) => (\n        <FieldComponent name={name} key={`field-${currStep}-${idx}`}\n          {...props}\n          {...getValueProps(name)}\n        />\n      ))}\n    </div>\n  </div>\n)\n\nSection.propTypes = {\n  activeStep: PropTypes.number,\n  currStep: PropTypes.number,\n  item: PropTypes.object,\n  getValueProps: PropTypes.func\n}\n\nexport default Section\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Step, Segment, Header, Divider, Responsive, Sidebar, Menu, Icon, Form, Dimmer, Button } from 'semantic-ui-react'\nimport { compose, withState, mapProps, pure } from 'recompose'\nimport { withReduxHome, withFormState } from '../../../redux/withRedux'\nimport withFieldData from '../../../graphql/withFieldData'\nimport Section from '../sections/Section'\nimport './TheFormComplex.css'\n\nconst TheFormComplex = ({\n  activeStep, sections, stepHeaders, sidebarVisible,\n  getValueProps,\n  setSidebarVisible,\n  setActiveStep\n}) => (\n  <div style={{ height: '100%' }}>\n    <TopbarEditing\n      activeStep={activeStep}\n      sidebarVisible={sidebarVisible}\n      sections={sections}\n      setSidebarVisible={setSidebarVisible}\n      setActiveStep={setActiveStep} />\n    <Sidebar.Pushable as='div'>\n      <Sidebar\n        as={Menu}\n        animation='overlay'\n        icon='labeled'\n        inverted\n        // onHide={this.handleSidebarHide}\n        vertical\n        visible={sidebarVisible}\n        width='wide' >\n        <Step.Group attached='top' style={{ marginTop: '40px' }}\n          vertical\n          ordered size='mini'\n          fluid>\n          {stepHeaders}\n        </Step.Group>\n      </Sidebar>\n\n      <Sidebar.Pusher className='formPusher'>\n        <Dimmer.Dimmable as={Segment} attached blurring>\n          <Dimmer active={sidebarVisible} onClick={() => setSidebarVisible(false)} />\n          <Responsive maxWidth='800'>\n            <p>{sections[activeStep] && sections[activeStep].description}</p>\n            <Divider />\n          </Responsive>\n          <Form>\n            {sections.map((item, currStep) => (\n              <Section key={`stepComp${currStep}`} {...{ item, currStep, activeStep, getValueProps }} />\n            ))}\n          </Form>\n        </Dimmer.Dimmable>\n      </Sidebar.Pusher>\n    </Sidebar.Pushable>\n    <Menu icon style={{ borderRadius: 0 }} fixed='bottom' inverted color='blue'>\n      <Menu.Menu position='right'>\n        {\n          activeStep < 1 ? null : (\n            <Menu.Item onClick={() => {\n              setActiveStep(activeStep - 1)\n              setSidebarVisible(false)\n            }\n            }>\n              <Icon name='arrow circle left' />Previous Step\n            </Menu.Item>\n          )\n        }\n        {\n          activeStep >= sections.length - 1 ? null : (\n            <Menu.Item onClick={() => {\n              setActiveStep(activeStep + 1)\n              setSidebarVisible(false)\n            }\n            }>\n                      Next Step<Icon name='arrow circle right' />\n            </Menu.Item>\n          )\n        }\n      </Menu.Menu>\n    </Menu>\n  </div>\n)\n\nTheFormComplex.propTypes = {\n  activeStep: PropTypes.number,\n  sections: PropTypes.array,\n  sidebarVisible: PropTypes.bool,\n  setSidebarVisible: PropTypes.func,\n  setActiveStep: PropTypes.func,\n  stepHeaders: PropTypes.arrayOf(PropTypes.node),\n  // From recompose\n  getValueProps: PropTypes.func\n}\n\nexport default compose(\n  withFormState,\n  withFieldData,\n  withState('activeStep', 'setActiveStep', 0),\n  withState('sidebarVisible', 'setSidebarVisible', false),\n  mapProps(initProps => {\n    const confirmStep = {\n      title: 'Confirmation',\n      description: 'Make sure everything is right',\n      Component: () => (\n        <div className='presentForm'>\n          {initProps.sections.map(({ Component }, idx) => <Component present key={`presentComponent${idx}`} />)}\n          <ConfirmMenu />\n        </div>\n      )\n    }\n    const newSections = [...initProps.sections, confirmStep] //\n\n    const stepHeaders = newSections.map(({ title, description, complete }, idx) => (\n      <Step link key={idx}\n        active={idx === initProps.activeStep}\n        completed={!!complete} onClick={() => {\n          initProps.setActiveStep(idx)\n          initProps.setSidebarVisible(false)\n        }\n        }>\n        <Step.Content>\n          <Step.Title>{title}</Step.Title>\n          <Step.Description>{description}</Step.Description>\n        </Step.Content>\n      </Step>\n    ))\n\n    return {\n      ...initProps,\n      steps: [...newSections],\n      stepHeaders: [...stepHeaders] // confirmHeader\n    }\n  })\n)(TheFormComplex)\n\nconst ConfirmMenu = withReduxHome(({ editing: { guid }, backToHome }) => (\n  <Menu icon style={{ borderRadius: 0 }}>\n    <Menu.Menu position='right'>\n      <Menu.Item>\n        <Button content='Cancel' color='red' icon='ban' onClick={() => {\n          // deleteStructure(guid)\n          backToHome()\n        }} />\n      </Menu.Item>\n      <Menu.Item>\n        <Button content='Save' color='green' icon='save' onClick={backToHome} />\n      </Menu.Item>\n    </Menu.Menu>\n  </Menu>\n))\n\nconst TopbarEditing = withReduxHome(({ backToHome, activeStep, sidebarVisible, sections, setSidebarVisible, setActiveStep }) => (\n  <Menu className='theFormComplexMenu' fixed='top' icon inverted style={{ borderRadius: 0 }} color='blue'>\n    <Menu.Item onClick={backToHome} color='black'>\n      <Icon name='home' />\n    </Menu.Item>\n    <Menu.Item name='bars' onClick={() => setSidebarVisible(!sidebarVisible)}>\n      <Icon name='bars' />\n    </Menu.Item>\n    <Menu.Item style={{ maxWidth: '48%' }}>\n      <Header as='div' style={{ fontSize: '0.8rem' }} inverted>Step {activeStep + 1}: {sections[activeStep].title}</Header>\n    </Menu.Item>\n    <Menu.Menu position='right'>\n      {\n        activeStep < 1 ? null : (\n          <Menu.Item onClick={() => {\n            setActiveStep(activeStep - 1)\n            setSidebarVisible(false)\n          }\n          }>\n            <Icon name='arrow circle left' />\n          </Menu.Item>\n        )\n      }\n      {\n        activeStep >= sections.length - 1 ? null : (\n          <Menu.Item onClick={() => {\n            setActiveStep(activeStep + 1)\n            setSidebarVisible(false)\n          }}>\n            <Icon name='arrow circle right' />\n          </Menu.Item>\n        )\n      }\n    </Menu.Menu>\n  </Menu>\n))\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Icon } from 'semantic-ui-react'\n\nconst style = {\n  zIndex: 10,\n  top: '1rem',\n  right: '1rem',\n  position: 'absolute'\n}\n\nconst StyleButtons = ({ currStyle, mapStyles, setCurrStyle }) => (\n  <Button.Group style={style}>\n    {\n      mapStyles.map((theStyle, idx) => (\n        <Button icon key={`stylebutton${idx}`}\n          // color={theStyle.color || null}\n          active={idx === currStyle}\n          onClick={() => setCurrStyle(idx)}>\n          <Icon name={theStyle.icon} />\n        </Button>\n      ))\n    }\n\n  </Button.Group>\n)\n\nStyleButtons.propTypes = {\n  currStyle: PropTypes.number,\n  mapStyles: PropTypes.array,\n  setCurrStyle: PropTypes.func\n}\n\nexport default StyleButtons\n","import React from 'react'\nimport ReactMapGL from 'react-map-gl'\nimport PropTypes from 'prop-types'\nimport { numericArrayCompare } from '../../../lib/util'\nimport WebMercatorViewport from 'viewport-mercator-project'\nimport MapStyles from './styles'\nimport { compose, withStateHandlers, lifecycle, defaultProps } from 'recompose'\nimport StyleButtons from './styles/StyleButtons'\nimport './BaseMap.css'\n\n/**\n * Note that this component technically has state but it is designed to be functionally stateless\n */\nconst BaseMap = ({\n  children, size: { height, width }, viewport, mapStyles, currStyle,\n  mapboxApiAccessToken, setCurrStyle, onViewportChange, onMapDataEvent,\n  stylechooser\n}) => (\n  <ReactMapGL\n    {...viewport}\n    height={height}\n    width={width}\n    mapStyle={mapStyles[currStyle].style}\n    onData={onMapDataEvent}\n    onViewportChange={onViewportChange}\n    mapboxApiAccessToken={mapboxApiAccessToken} >\n    { stylechooser ? <StyleButtons currStyle={currStyle} mapStyles={mapStyles} setCurrStyle={setCurrStyle} /> : null }\n    {/* Augment children with some props they need to survive in this harsh world */}\n    {\n      children && Array.isArray(children)\n        ? children.map(c => handleChild(c, viewport, height, width))\n        : handleChild(children, viewport, height, width)\n    }\n  </ReactMapGL>\n)\n\nfunction handleChild (child, viewport, height, width) {\n  return typeof child === 'function'\n    ? child(viewport, height, width)\n    : child\n}\n\nBaseMap.propTypes = {\n  // Anything else we want to add to the map\n  children: PropTypes.any,\n  deckelements: PropTypes.array,\n  data: PropTypes.array,\n\n  // Some switches to make things easier\n  stylechooser: PropTypes.bool,\n  lockPan: PropTypes.bool,\n  lockZoom: PropTypes.bool,\n  lockToBounds: PropTypes.bool,\n  maxZoom: PropTypes.number,\n  minZoom: PropTypes.number,\n\n  minPitch: PropTypes.number,\n  maxPitch: PropTypes.number,\n  pitch: PropTypes.number,\n\n  maxBounds: PropTypes.array,\n  InnerBounds: PropTypes.array,\n\n  mapStyles: PropTypes.array,\n\n  // Just some default props we probably won't set.\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  zoom: PropTypes.number,\n\n  viewport: PropTypes.object.isRequired,\n  currStyle: PropTypes.number.isRequired,\n\n  onViewportChange: PropTypes.func.isRequired,\n  onMapDataEvent: PropTypes.func,\n  setCurrStyle: PropTypes.func.isRequired,\n\n  // Passed in from elsewhere\n  mapboxApiAccessToken: PropTypes.string.isRequired,\n\n  // We get these props from calculating the window size at a higher level\n  size: PropTypes.shape({\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired\n  })\n}\n\nexport default compose(\n  defaultProps({\n    stylechooser: true,\n    zoom: 12,\n    latitude: 49.3050394,\n    longitude: -123.1398254,\n    size: {\n      height: 500,\n      width: 600\n    },\n    mapStyles: MapStyles,\n    lockToBounds: true\n  }),\n  withStateHandlers(\n    ({ maxBounds, latitude, longitude, zoom, pitch, minPitch, maxPitch, bearing }) => ({\n      currStyle: 0,\n      viewport: {\n        latitude: maxBounds ? (maxBounds[1] + maxBounds[3]) / 2 : latitude,\n        longitude: maxBounds ? (maxBounds[0] + maxBounds[2]) / 2 : longitude,\n        zoom: zoom,\n        minPitch: minPitch,\n        maxPitch: maxPitch,\n        bearing: bearing || 0,\n        pitch: pitch || 0\n      }\n    }), {\n    // This one's a thunk!!\n      setCurrStyle: () => (currStyle) => ({ currStyle }),\n      recalcZoomBounds: ({ viewport }, { maxBounds, size, longitude, latitude }) => (nextProps, force = false) => {\n        // Can't do anything without any bounds\n        if (!maxBounds && !nextProps.maxBounds) return\n\n        // Any time the bounds change we want to recalc the props\n        let minlng, minlat, maxlng, maxlat\n        const { maxZoom, minZoom } = nextProps\n        if (nextProps.maxBounds) [minlng, minlat, maxlng, maxlat] = nextProps.maxBounds\n        else [minlng, minlat, maxlng, maxlat] = maxBounds\n\n        // Bounds change\n        const boundsChange = nextProps.maxBounds && !numericArrayCompare(nextProps.maxBounds, maxBounds)\n        let sizeChange = null\n        if (nextProps.size) {\n          sizeChange = nextProps.size.width !== 0 && (nextProps.size.width !== size.width || nextProps.size.height !== size.height)\n        }\n\n        if (boundsChange) [minlng, minlat, maxlng, maxlat] = nextProps.maxBounds\n\n        let newLat = viewport.latitude\n        let newLong = viewport.longitude\n        let zoom = viewport.zoom\n        let newPitch = viewport.pitch\n        let newBearing = viewport.Bearing\n\n        if (boundsChange || sizeChange || force) {\n          // On the first run we're going to try to center the bounds.\n          const { width, height } = nextProps.size\n          try {\n            const wmview = new WebMercatorViewport({ width: width > 0 ? width : size.width, height: height > 0 ? height : size.height })\n            console.log('before boundschange', { wmview, bds: [ [minlng, minlat], [maxlng, maxlat] ] })\n            const fittedBounds = wmview.fitBounds(\n              [ [minlng, minlat], [maxlng, maxlat] ],\n              { padding: 20, offset: [0, -40] }\n            )\n            newLat = fittedBounds.latitude\n            newLong = fittedBounds.longitude\n            zoom = fittedBounds.zoom\n          }\n          catch (e) {\n            // Sometimes we don't have a valid bound. Don't make a big deal out of it.\n            console.error(e)\n          }\n\n          const newViewport = Object.assign({}, viewport, { latitide: newLat, longitude: newLong, zoom, bearing: newBearing, pitch: newPitch })\n          const zoombounds = {\n            max: maxZoom || viewport.zoom + 6,\n            min: minZoom || viewport.zoom - 6\n          }\n\n          return { viewport: newViewport, zoombounds }\n        }\n      },\n      onViewportChange: ({ zoombounds, viewport: oldViewport }, { maxBounds, lockPan, lockToBounds, lockZoom, longitude, latitude }) => (viewport) => {\n        // Here we set/reset the bounds\n        if (lockPan) {\n          viewport.longitude = oldViewport.longitude\n          viewport.latitude = oldViewport.latitude\n        }\n        else if (maxBounds && lockToBounds) {\n          if (viewport.longitude < maxBounds[0]) viewport.longitude = maxBounds[0]\n          else if (viewport.longitude > maxBounds[2]) viewport.longitude = maxBounds[2]\n\n          if (viewport.latitude < maxBounds[1]) viewport.latitude = maxBounds[1]\n          else if (viewport.latitude > maxBounds[3]) viewport.latitude = maxBounds[3]\n        }\n        // Here we set the max and min zoom bounds.\n        if (lockZoom) {\n          viewport.zoom = oldViewport.zoom\n        }\n        else if (zoombounds) {\n          if (viewport.zoom < zoombounds.min) viewport.zoom = zoombounds.min\n          else if (viewport.zoom > zoombounds.max) viewport.zoom = zoombounds.max\n        }\n        // console.log('VIEWPORT', viewport)\n        return { viewport }\n      }\n    }\n  ),\n  // Unfortunately we need some lifecycle events for when things happen\n  lifecycle({\n    componentDidMount () {\n      const { viewport, onViewportChange, recalcZoomBounds } = this.props\n      onViewportChange(viewport)\n      recalcZoomBounds(this.props, true)\n    },\n    componentWillReceiveProps (nextProps) {\n      const { recalcZoomBounds, latitude, longitude } = this.props\n      // If someone changes the lat/lng props then immediately jump\n      if (longitude !== nextProps.longitude || latitude !== nextProps.latitude) {\n        nextProps.viewport.latitude = nextProps.latitude\n        nextProps.viewport.longitude = nextProps.longitude\n      }\n      recalcZoomBounds(nextProps)\n    }\n  })\n)(BaseMap)\n","import { isNumeric } from './util'\n// // Just set some dummy macbounds for now.\n/**\n *\n * @param {*} acc  the accumulator we're comparing to\n * @param {*} pt  [Easting, Nothing]\n */\nexport function findBounds (pts) {\n  try {\n    return pts.filter(pt => !!pt).reduce((bds, pt) => {\n      if (!pt) return bds\n      const newAcc = !bds ? [null, null, null, null] : bds.slice()\n\n      if (!newAcc[0] || newAcc[0] > pt[0]) newAcc[0] = pt[0]\n      if (!newAcc[1] || newAcc[1] > pt[1]) newAcc[1] = pt[1]\n      if (!newAcc[2] || newAcc[2] < pt[0]) newAcc[2] = pt[0]\n      if (!newAcc[3] || newAcc[3] < pt[1]) newAcc[3] = pt[1]\n      return newAcc\n    }, null)\n  }\n  catch (e) {\n    console.error('findBounds', e)\n  }\n}\n\n/**\n * Find the average of a bunch of points\n * @param {*} pts\n */\nexport function findCenter (pts) {\n  try {\n    const sums = pts\n      .filter(pt => !!pt)\n      .reduce((acc, pt) => [acc[0] + pt[0], acc[1] + pt[1]], [0, 0])\n    return [sums[0] / pts.length, sums[1] / pts.length]\n  }\n  catch (e) {}\n}\n\n/**\n * Given a range of data points. find the y-extent and buffer it by a percent\n * @param {*} allDataPts\n * @param {*} lastDrawLocation\n * @param {*} buffer\n **/\nexport function findYdomain (allDataPts, lastDrawLocation, buffer = 0.05) {\n  // console.log('findYdomain RUN')\n  try {\n    const filteredys = allDataPts\n      // Either don't filter (if we aren't zoomed) or filter to the left and the right\n      .filter(p => !lastDrawLocation || (p.x >= lastDrawLocation.left && p.x <= lastDrawLocation.right))\n\n    if (filteredys.length === 0) return\n\n    const rawEdges = [\n      Math.min(...filteredys.map(dp => (dp.y - (dp.err ? dp.err : 0)))),\n      Math.max(...filteredys.map(dp => (dp.y + (dp.err ? dp.err : 0))))\n    ]\n\n    const range = rawEdges[1] - rawEdges[0]\n    // Buffer by %\n    const newRange = [rawEdges[0] !== 0 ? rawEdges[0] - range * buffer : 0, rawEdges[1] + range * buffer]\n\n    return newRange\n  }\n  catch (e) {\n    console.error(e)\n    return null\n  }\n}\n\n/**\n * return the greatest character count of the y vals\n * @param {*} allDAtaPts\n */\nexport function maxYChars (allDAtaPts) {\n  try {\n    const maxYChars = Math.max(...allDAtaPts.map(p => {\n      if (isNumeric(p.y)) return p.y.toFixed(1).length\n      else return p.y.toString().length\n    }))\n    return maxYChars\n  }\n  catch (e) {\n    return 5\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport BaseMap from '../../common/maps/BaseMap'\nimport { Icon, Popup } from 'semantic-ui-react'\nimport { AutoSizer } from 'react-virtualized'\nimport { Marker } from 'react-map-gl'\nimport { findBounds, findCenter } from '../../../lib/mapUtil'\nimport { compose, withProps } from 'recompose'\nimport { mapBoxToken } from '../../../config'\n\nconst MarkerMap = ({ data, center, bounds, ...props }) => (\n  <div style={{ minHeight: '100%' }}>\n    <AutoSizer>\n      {({ height, width }) => (\n        <BaseMap\n          {...props}\n          mapboxApiAccessToken={mapBoxToken}\n          maxBounds={bounds}\n          longitude={center[0]}\n          latitude={center[1]}\n          size={{ height: height < 500 ? 500 : height, width }} >\n          {\n            // Render props here\n            (viewport) => data.map(({ latitude, longitude }, idx) => (\n              <Marker viewport={viewport} key={`marker-${idx}`}\n                longitude={longitude}\n                latitude={latitude}\n                offsetLeft={-20}\n                offsetTop={-30} >\n                <Popup\n                  flowing\n                  trigger={\n                    <Icon\n                      className='markerIcon'\n                      name='map marker'\n                      size='large'\n                      color='red'\n                      style={{ textShadow: '2px 2px 2px #00000099' }}\n                    />\n                  }>\n                  {/* Hello: ({latitude}, {longitude}) */}\n                </Popup>\n              </Marker>\n            ))\n          }\n        </BaseMap>\n      )}\n    </AutoSizer>\n  </div>\n)\n\nMarkerMap.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.shape({\n    latitude: PropTypes.number,\n    longitude: PropTypes.number\n  }))\n}\n\nexport default compose(\n  withProps(({ structures }) => {\n    const noData = {\n      latitude: 49.3050394,\n      longitude: -123.1398254\n    }\n    const data = []\n    structures.forEach(struct => {\n      try {\n        const { latitude, longitude } = JSON.parse(struct.body)['location'].value\n        data.push({ latitude, longitude })\n      }\n      catch (e) {\n\n      }\n    })\n    return {\n      data,\n      center: data.length > 0 ? findCenter(data.map(d => ([d.longitude, d.latitude]))) : [noData.longitude, noData.latitude],\n      bounds: data.length > 0 ? findBounds(data.map(d => ([d.longitude, d.latitude]))) : [noData.longitude - 0.01, noData.latitude - 0.01, noData.longitude + 0.01, noData.latitude + 0.01]\n    }\n  })\n)(MarkerMap)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { compose, branch, renderComponent } from 'recompose'\nimport { Auth } from 'aws-amplify'\n\n// Now some graphql stuff\nimport { withStructuresList } from '../../../graphql/queries'\nimport Structures from '../misc/Structures'\nimport Topbar from '../Topbar'\n\nimport { Tab, Segment, Button, Header } from 'semantic-ui-react'\nimport StructureViewer from './StructureViewer'\n// import Placeholder from '../../misc/Placeholder'\nimport { withReduxHome } from '../../../redux/withRedux'\nimport AddButton from '../misc/AddButton'\nimport RefreshStockButton from '../misc/RefreshStockButton'\nimport TheFormComplex from './TheFormComplex'\nimport sections from '../sections'\nimport HomeMap from './HomeMap'\n\nimport './Homepage.css'\n\nconst Homepage = ({ structures }) => (\n  <div className='appContainer'>\n    <Topbar />\n    <Tab className='tabContainer'\n      menu={{\n        secondary: true,\n        inverted: true,\n        color: 'green',\n        icon: 'labeled',\n        size: 'large',\n        style: { marginBottom: 0, borderRadius: 0, border: 0 }\n      }}\n      panes={\n        [\n          {\n            menuItem: {\n              key: 'users',\n              icon: 'list',\n              content: 'List'\n            },\n            render: () => (\n              <Tab.Pane>\n                <Structures structures={structures} />\n                <AddButton />\n              </Tab.Pane>\n            )\n          },\n          {\n            menuItem: { key: 'map', icon: 'map', content: 'Map' },\n            render: () => (\n              <Tab.Pane>\n                <HomeMap structures={structures} />\n              </Tab.Pane>\n            )\n          },\n          {\n            menuItem: { key: 'settings', icon: 'settings', content: 'Settings' },\n            render: () => (\n              <Tab.Pane>\n                <Segment>\n                  <Header>Settings</Header>\n                  <p>Click this button to add some stock entries.</p>\n                  <RefreshStockButton />\n                  <p>Or you might want to log out...</p>\n                  <Button color='yellow' size='large' icon='lock open' fluid content='Log Out' onClick={() => {\n                    Auth.signOut()\n                    // This is a hack to force the page to refresh\n                    window.location.replace('./')\n                  }} />\n\n                </Segment>\n\n              </Tab.Pane>\n            )\n          }\n        ]\n      } />\n    <div id='Version'>v0.0.25</div>\n  </div>\n)\n\nHomepage.propTypes = {\n  structures: PropTypes.array\n}\n\nconst TheBDAForm = (props) => <TheFormComplex sections={sections} {...props} />\n\n/**\n * We really should be using React Router or something but for now we only have 3 states anyway:\n *    - List view (the one with tabs)\n *    - Form view (data entry)\n *    - View view (looking at the data being presented)\n */\nexport default compose(\n  withStructuresList,\n  withReduxHome,\n  branch(({ editing }) => editing && editing.guid && editing.edit, renderComponent(TheBDAForm)),\n  branch(({ editing }) => editing && editing.guid && !editing.edit, renderComponent(StructureViewer))\n)(Homepage)\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createStore, compose, applyMiddleware } from 'redux'\nimport persistState from 'redux-localstorage'\nimport reducers from './reducers'\nimport thunkMiddleware from 'redux-thunk'\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n\nconst store = createStore(\n  reducers,\n  composeEnhancer(\n    // {}, // default state (previously loaded from a JSON file)\n    persistState(), // keep our settings in localstorage\n    applyMiddleware(\n      thunkMiddleware // lets us dispatch() functions\n      // loggerMiddleware // neat middleware that logs actions\n    )\n  )\n)\n\nexport default store\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Homepage from './components/BDAMobile/views/Homepage'\nimport registerServiceWorker from './registerServiceWorker'\nimport { Provider } from 'react-redux'\nimport store from './redux/store'\nimport config from './config'\n\nimport AWSAppSyncClient from 'aws-appsync'\nimport { Rehydrated } from 'aws-appsync-react'\nimport { ApolloProvider } from 'react-apollo'\n\n// Amplify\nimport Amplify, { Auth } from 'aws-amplify'\nimport { withAuthenticator } from 'aws-amplify-react'\n\n// Import some global CSS styles we use everywhere\nimport 'semantic-ui-css/semantic.css'\nimport 'react-vis/dist/style.css'\nimport './index.css'\n\n// Amplify init\nAmplify.configure(config.Auth)\n\n// AppSync client instantiation\nconst client = new AWSAppSyncClient({\n  url: config.GraphQLEndpoint,\n  region: config.Auth.region,\n  auth: {\n    type: 'AMAZON_COGNITO_USER_POOLS',\n    // Get the currently logged in users credential.\n    jwtToken: async () => (await Auth.currentSession()).getAccessToken().getJwtToken()\n  },\n  // Amplify uses Amazon IAM to authorize calls to Amazon S3. This provides the relevant IAM credentials.\n  complexObjectsCredentials: () => Auth.currentCredentials()\n})\n\nconst AppWithAuth = withAuthenticator(Homepage, false)\n\n// REDUX then apollo then auth\nReactDOM.render(\n  <Provider store={store}>\n    <ApolloProvider client={client}>\n      <Rehydrated>\n        <AppWithAuth />\n      </Rehydrated>\n    </ApolloProvider>\n  </Provider>,\n  document.getElementById('root'))\n\n// This is what makes a PWA\nregisterServiceWorker()\n\nfunction addToHomeScreen () {\n  const a2hsBtn = document.querySelector('.ad2hs-prompt') // hide our user interface that shows our A2HS button\n  a2hsBtn.style.display = 'none' // Show the prompt\n  deferredPrompt.prompt() // Wait for the user to respond to the prompt\n  deferredPrompt.userChoice\n    .then(choiceResult => {\n      if (choiceResult.outcome === 'accepted') console.log('User accepted the A2HS prompt')\n      else console.log('User dismissed the A2HS prompt')\n\n      deferredPrompt = null\n    })\n}\n\nfunction showAddToHomeScreen () {\n  const a2hsBtn = document.querySelector('.ad2hs-prompt')\n  a2hsBtn.style.display = 'block'\n  a2hsBtn.addEventListener('click', addToHomeScreen)\n}\n\nlet deferredPrompt\nwindow.addEventListener('beforeinstallprompt', e => {\n  // Prevent Chrome 67 and earlier from automatically showing the prompt\n  e.preventDefault()\n  // Stash the event so it can be triggered later.\n  deferredPrompt = e\n\n  showAddToHomeScreen()\n})\n\n// Detects if device is on iOS\nconst isIos = () => {\n  const userAgent = window.navigator.userAgent.toLowerCase()\n  return /iphone|ipad|ipod/.test(userAgent)\n}\n// Detects if device is in standalone mode\nconst isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone)\n\n// Checks if should display install popup notification:\nif (isIos() && !isInStandaloneMode()) {\n  console.log('I AM on IOS and I am NOT in standalone mode.')\n  // this.setState({ showInstallMessage: true })\n}\n","import numeral from 'numeral'\nimport _ from 'lodash'\n\nexport const isNumeric = num => {\n  try {\n    return !isNaN(parseFloat(num)) && isFinite(num)\n  }\n  catch (e) {\n    return false\n  }\n}\n/**\n * This is a correction to strip === signs off of base64-encoded strings\n * @param {} x\n */\nexport const urlizeb64 = x => x.replace('+', '-').replace('/', '_').replace(/=+$/, '')\n\n/**\n * We need numbers displayed consistently. This is how we do it.\n * @param {*} num\n * @param {*} precision\n */\nexport function formatNum (num, precision) {\n  try {\n    const precstr = precision > 0 ? '.' + Array(precision + 1).join('0') : ''\n    const newprec = isNumeric(num) ? numeral(num).format(`0,0${precstr}`) : num\n    return newprec.replace(/(\\.(0{0,1}[1-9]*))0+$/, '$1')\n  }\n  catch (e) {\n    return num\n  }\n}\n\n/**\n * Magic function to clear mouse selection. Use sparingly.\n */\nexport function clearSelection () {\n  if (document.selection && document.selection.empty) {\n    document.selection.empty()\n  }\n  else if (window.getSelection) {\n    var sel = window.getSelection()\n    sel.removeAllRanges()\n  }\n}\n\nexport function isObjectWithKeys (obj) {\n  return ((typeof obj === 'object') && (obj !== null) && Object.keys(obj).length > 0)\n}\n\n/**\n * Dom node parsing is weird because it may return an array or a single element with no way to know\n * which is which.\n */\nexport function makeDomArray (domnode) {\n  if (!domnode) return []\n  const keys = Object.keys(domnode)\n  // This is not the pattern we expect\n  if (keys.length > 1 || keys.length === 0) throw Error('Expected nester domnode structure.')\n  if (!domnode) return []\n  if (!domnode[keys[0]]) return []\n  return Array.isArray(domnode[keys[0]]) ? domnode[keys[0]] : [domnode[keys[0]]]\n}\n\nexport function capitalizeFirstLetter (string) {\n  return string.charAt(0).toUpperCase() + string.slice(1)\n}\n\n/**\n * Good for comparing two purely numeric arrays\n * @param {*} arr1\n * @param {*} arr2\n */\nexport function numericArrayCompare (arr1, arr2) {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) return false\n  if (arr1.length !== arr2.length) return false\n\n  return !arr1.some((el, idx) => el !== arr2[idx])\n}\n\n/**\n * We need a function to add the padding '=' signs back before we decode\n * @param {*} hash\n */\nexport function decodeUnbufferedBase64 (hash) {\n  const missingPadding = hash.length % 4\n  if (missingPadding !== 0) {\n    const newhash = hash + Array(4 - missingPadding).join('=')\n    return Buffer.from(newhash, 'base64').toString()\n  }\n  else {\n    return Buffer.from(hash, 'base64').toString()\n  }\n}\n\nexport function encodeUnbufferedBase64 (str) {\n  return urlizeb64(Buffer.from(str).toString('base64'))\n}\n\n/**\n *\n * @param {*} o\n */\nexport function isObject (o) {\n  return o instanceof Object && o.constructor === Object\n}\n\n/**\n * XML to JSON is a non-trivial exercise. We can make certain assumptions\n * about our incoming file\n * @param {*} data\n */\nexport function arrToObj (data) {\n  for (const key in data) {\n    // Make sure we're looping over legitimate objects\n    if (data.hasOwnProperty(key)) {\n      const keyDat = data[key]\n      if (keyDat._) {\n        keyDat.val = keyDat._\n        delete keyDat._\n      }\n      if (keyDat.$) {\n        keyDat.attr = keyDat.$\n        delete keyDat.$\n      }\n      if (typeof keyDat === 'object') {\n        data[key] = arrToObj(keyDat)\n        // There's a pattern we want to collapse\n        // It puts every single individual value into its own array. Not cool\n        if (Array.isArray(keyDat) && keyDat.length === 1 && typeof keyDat[0] === 'string') {\n          if (isNumeric(keyDat[0])) data[key] = Number(keyDat[0])\n          else data[key] = keyDat[0].replace(/\\\\/g, '/')\n        }\n        else if (Array.isArray(keyDat) && keyDat.length === 1 &&\n        // The second case is when it puts objects into its own array\n          isObject(keyDat[0]) &&\n          Object.keys(keyDat[0]).length === 1) {\n          // xml2js does a weird thing where attributes get put into the following structure\n          // [{ \"_\": \"475945.992587164,5125837.37170763\", \"$\": { \"units\": \"m\"  } }]\n          data[key] = keyDat[0][Object.keys(keyDat[0])[0]]\n        }\n        // Dynamo DB does not like empty strings\n        if (typeof data[key] && data[key].length === 0) {\n          delete data[key]\n        }\n        if (typeof data[key] === 'string' && isNumeric(data[key])) data[key] = Number(data[key])\n      }\n    }\n  }\n  return data\n}\n\n/**\n * Returns a random number between min (inclusive) and max (exclusive)\n */\nexport function getRandomArbitraryInt (min, max) {\n  return parseInt(Math.random() * (max - min) + min, 10)\n}\n\nexport const randomMap = (low, high, func) =>\n  [...Array(_.random(low, high)).keys()]\n    .map(func)\n\nexport const randomArrayEl = (arr) => arr[_.random(0, arr.length - 1)]\n"],"sourceRoot":""}